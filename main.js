/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};

// main.ts
__export(exports, {
  default: () => WordPopupPlugin
});
var import_obsidian3 = __toModule(require("obsidian"));

// pattern_matcher.ts
var TrieNode = class {
  constructor() {
    this.children = {};
    this.value = null;
  }
};
var Trie = class {
  constructor(terms) {
    this.root = new TrieNode();
    for (const { term, value } of terms) {
      this.insert(term, value);
    }
  }
  insert(term, value) {
    let node = this.root;
    for (const char of term) {
      if (!node.children[char]) {
        node.children[char] = new TrieNode();
      }
      node = node.children[char];
    }
    node.value = value;
  }
  lookup(query) {
    const results = [];
    const visited = new Set();
    this._lookupHelper(this.root, query, 0, results, [], visited);
    return results;
  }
  _lookupHelper(node, query, index, results, wildcardMatches, visited) {
    if (index === query.length) {
      if (node.value !== null && !visited.has(node)) {
        results.push({
          value: node.value,
          match: wildcardMatches.slice()
        });
        visited.add(node);
      }
      return;
    }
    const char = query[index];
    if (node.children[char]) {
      this._lookupHelper(node.children[char], query, index + 1, results, wildcardMatches, visited);
    }
    if (char.match(/^[0-9a-z]+$/) && node.children["*"]) {
      const newWildcardMatches = wildcardMatches.concat(char);
      this._lookupHelper(node.children["*"], query, index + 1, results, newWildcardMatches, visited);
    }
  }
  typeAhead(query) {
    let nodes = [{ node: this.root, index: 0 }];
    const results = [];
    const collectedNodes = new Set();
    while (nodes.length > 0) {
      let nextNodes = [];
      for (const { node, index } of nodes) {
        if (index === query.length) {
          this._collectValues(node, results, collectedNodes);
        } else {
          const char = query[index];
          if (node.children[char]) {
            nextNodes.push({
              node: node.children[char],
              index: index + 1
            });
          }
          if (char.match(/^[0-9a-z]+$/) && node.children["*"]) {
            nextNodes.push({
              node: node.children["*"],
              index: index + 1
            });
          }
        }
      }
      nodes = nextNodes;
    }
    return results;
  }
  _collectValues(startNode, results, collectedNodes) {
    let queue = [startNode];
    const visitedNodes = new Set();
    while (queue.length > 0) {
      const node = queue.shift();
      if (visitedNodes.has(node)) {
        continue;
      }
      visitedNodes.add(node);
      if (node.value !== null && !collectedNodes.has(node)) {
        results.push(node.value);
        collectedNodes.add(node);
      }
      for (const childNode of Object.values(node.children)) {
        queue.push(childNode);
      }
    }
  }
};
var RegexMatcher = class {
  constructor(patterns) {
    this.patterns = patterns.map((p) => ({
      regex: new RegExp(p.pattern),
      replacements: p.replacements
    }));
  }
  addPattern(pattern) {
    this.patterns.push({
      regex: new RegExp(pattern.pattern),
      replacements: pattern.replacements
    });
  }
  getSuggestions(input) {
    const suggestions = [];
    let fastReplace = false;
    for (const pattern of this.patterns) {
      const matches = input.match(pattern.regex);
      if (matches) {
        for (const replacement of pattern.replacements) {
          let result = replacement;
          for (let i = 1; i < matches.length; i++) {
            result = result.replace(`$${i}`, matches[i] || "");
          }
          suggestions.push(result);
        }
      }
    }
    return { suggestions, fastReplace };
  }
};
var SuggestionMatcher = class {
  constructor(patterns) {
    const trieTerms = patterns.flatMap((conf) => {
      if (!conf.type) {
        return [{ term: conf.pattern, value: conf }];
      }
      return [];
    });
    this.trie = new Trie(trieTerms);
    const regexTerms = patterns.flatMap((conf) => {
      if (conf.type && conf.type === "regex") {
        return [conf];
      }
      return [];
    });
    this.regexes = new RegexMatcher(regexTerms);
  }
  replacePlaceholders(value, matches) {
    return value.replace(/\$([1-9]\d*)/g, (match, indexStr) => {
      const index = parseInt(indexStr, 10) - 1;
      if (index < matches.length) {
        return matches[index];
      }
      return match;
    });
  }
  getMatchingPatterns(searchString) {
    return this.trie.lookup(searchString);
  }
  getSuggestions(searchString) {
    const results = this.trie.lookup(searchString);
    const suggestions = [];
    let fastReplace = false;
    results.forEach(({ value: conf, match: wildcardMatches }) => {
      conf.replacements.forEach((replacement) => {
        const suggestion = this.replacePlaceholders(replacement, wildcardMatches);
        suggestions.push(suggestion);
      });
      fastReplace = fastReplace || !!conf.fastReplace;
    });
    const rs = this.regexes.getSuggestions(searchString);
    suggestions.push(...rs.suggestions);
    fastReplace = (fastReplace || rs.fastReplace) && suggestions.length === 1;
    return { suggestions, fastReplace };
  }
};

// config.ts
var DEFAULT_CONFIG = {
  renderMath: false,
  patterns: [
    { pattern: "or", replacements: ["\\lor"], fastReplace: true },
    { pattern: "and", replacements: ["\\land"], fastReplace: true },
    { pattern: "not", replacements: ["\\lnot"], fastReplace: true },
    { pattern: "=>", replacements: ["\\implies"], fastReplace: true },
    { pattern: "<=>", replacements: ["\\iff"], fastReplace: true },
    { pattern: "a", replacements: ["\\alpha", "\\aleph"] },
    { pattern: "b", replacements: ["\\beta", "\\beth"] },
    { pattern: "g", replacements: ["\\gamma", "\\gimel"] },
    { pattern: "d", replacements: ["\\delta", "\\daleth"] },
    { pattern: "e", replacements: ["\\epsilon", "\\varepsilon"] },
    { pattern: "z", replacements: ["\\zeta"] },
    { pattern: "h", replacements: ["\\eta"] },
    { pattern: "t", replacements: ["\\theta", "\\vartheta"] },
    { pattern: "i", replacements: ["\\iota"] },
    { pattern: "k", replacements: ["\\kappa"] },
    { pattern: "l", replacements: ["\\lambda"] },
    { pattern: "m", replacements: ["\\mu"] },
    { pattern: "n", replacements: ["\\nu"] },
    { pattern: "x", replacements: ["\\xi"] },
    { pattern: "o", replacements: ["\\omicron"] },
    { pattern: "p", replacements: ["\\pi", "\\varpi"] },
    { pattern: "r", replacements: ["\\rho", "\\varrho"] },
    { pattern: "s", replacements: ["\\sigma", "\\varsigma"] },
    { pattern: "u", replacements: ["\\upsilon"] },
    { pattern: "f", replacements: ["\\phi", "\\varphi"] },
    { pattern: "c", replacements: ["\\chi"] },
    { pattern: "y", replacements: ["\\psi"] },
    { pattern: "w", replacements: ["\\omega"] },
    { pattern: "E", replacements: ["\\exists"] },
    { pattern: "G", replacements: ["\\Gamma"] },
    { pattern: "D", replacements: ["\\Delta"] },
    { pattern: "T", replacements: ["\\Theta"] },
    { pattern: "I", replacements: ["\\Iota"] },
    { pattern: "L", replacements: ["\\Lambda"] },
    { pattern: "X", replacements: ["\\Xi"] },
    { pattern: "P", replacements: ["\\Pi"] },
    { pattern: "S", replacements: ["\\Sigma"] },
    { pattern: "U", replacements: ["\\Upsilon"] },
    { pattern: "F", replacements: ["\\Phi", "\\forall"] },
    { pattern: "Y", replacements: ["\\Psi"] },
    { pattern: "W", replacements: ["\\Omega"] },
    { pattern: "(", replacements: ["\\big(", "\\Big(", "\\bigg(", "\\Bigg("] },
    { pattern: ")", replacements: ["\\big)", "\\Big)", "\\bigg)", "\\Bigg)"] },
    { pattern: "[", replacements: ["\\big[", "\\Big[", "\\bigg[", "\\Bigg[", "\\lceil", "\\lfloor", "\\ulcorner", "\\llcorner"] },
    { pattern: "]", replacements: ["\\big]", "\\Big]", "\\bigg]", "\\Bigg]", "\\rceil", "\\rfloor", "\\urcorner", "\\lrcorner"] },
    { pattern: "->", replacements: ["\\rightarrow", "\\to"] },
    { pattern: "<-", replacements: ["\\leftarrow"] },
    { pattern: "<->", replacements: ["\\leftrightarrow"] },
    { pattern: "=>", replacements: ["\\implies"] },
    { pattern: "<=", replacements: ["\\leq"] },
    { pattern: ">=", replacements: ["\\geq"] },
    { pattern: "+", replacements: ["+"] },
    { pattern: "-", replacements: ["-"] },
    { pattern: "/", replacements: ["\\div"] },
    { pattern: "sum", replacements: ["\\sum"] },
    { pattern: "int", replacements: ["\\int"] },
    { pattern: "lim", replacements: ["\\lim"] },
    { pattern: "inf", replacements: ["\\infty"] },
    { pattern: "sqrt", replacements: ["\\sqrt"] },
    { pattern: "prod", replacements: ["\\prod"] },
    { pattern: "=", replacements: ["="] },
    { pattern: "!=", replacements: ["\\neq"] },
    { pattern: "~=", replacements: ["\\approx"] },
    { pattern: "~~", replacements: ["\\sim"] },
    { pattern: "<<", replacements: ["\\ll"] },
    { pattern: ">>", replacements: ["\\gg"] },
    { pattern: "in", replacements: ["\\in"], fastReplace: true },
    { pattern: "ni", replacements: ["\\ni"], fastReplace: true },
    { pattern: "subset", replacements: ["\\subset", "\\subseteq"] },
    { pattern: "supset", replacements: ["\\supset", "\\supseteq"] },
    { pattern: "empty", replacements: ["\\emptyset"], fastReplace: true },
    { pattern: "...", replacements: ["\\ldots"] },
    { pattern: "\xB0", replacements: ["\\degree"] },
    { pattern: "\xA3", replacements: ["\\pounds"] },
    { pattern: "$", replacements: ["\\$"] },
    { pattern: "%", replacements: ["\\%"] },
    { pattern: "&", replacements: ["\\&"] },
    { pattern: "hat", replacements: ["\\hat{}"] },
    { pattern: "bar", replacements: ["\\bar{}"] },
    { pattern: "tilde", replacements: ["\\tilde{}"] },
    { pattern: "vec", replacements: ["\\vec{}"] },
    { pattern: "sin", replacements: ["\\sin"], fastReplace: true },
    { pattern: "cos", replacements: ["\\cos"], fastReplace: true },
    { pattern: "tan", replacements: ["\\tan"], fastReplace: true },
    { pattern: "log", replacements: ["\\log"], fastReplace: true },
    { pattern: "ln", replacements: ["\\ln"], fastReplace: true },
    { pattern: "exp", replacements: ["\\exp"], fastReplace: true },
    { pattern: "frac", replacements: ["T:\\frac{$1}{$2}"] },
    { pattern: "binom", replacements: ["\\binom{}{}"] },
    { type: "regex", pattern: "(.*)_over$", replacements: ["\\overline{$1}"] },
    { pattern: "underline", replacements: ["\\underline{}"] },
    { pattern: "overset", replacements: ["\\overset{}{}}"] },
    { pattern: "underset", replacements: ["\\underset{}{}}"] },
    { pattern: "forall", replacements: ["\\forall"], fastReplace: true },
    { pattern: "exists", replacements: ["\\exists"], fastReplace: true },
    { pattern: "nexists", replacements: ["\\nexists"], fastReplace: true },
    { pattern: "aleph", replacements: ["\\aleph"] },
    { pattern: "hbar", replacements: ["\\hbar"] },
    { pattern: "ell", replacements: ["\\ell"] },
    { pattern: "Re", replacements: ["\\Re"] },
    { pattern: "Im", replacements: ["\\Im"] }
  ]
};
var ConfigManager = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async saveConfig(config) {
    await this.plugin.saveData(this.config);
  }
  async loadConfig() {
    this.config = Object.assign({}, DEFAULT_CONFIG, await this.plugin.loadData());
    this.matcher = new SuggestionMatcher(this.config.patterns);
  }
  async updateConfig(newConfig) {
    this.config = newConfig;
    await this.saveConfig(this.config);
    this.matcher = new SuggestionMatcher(this.config.patterns);
  }
  async resetConfig() {
    await this.updateConfig(DEFAULT_CONFIG);
  }
};

// suggestion_popup.ts
var import_obsidian = __toModule(require("obsidian"));
var TEMPLATE_PREFIX = "T:";
var SuggestionPopup = class {
  constructor() {
    this.element = this.createElement();
    this.isVisible = false;
    this.currentMatch = null;
    this.currentReplacements = null;
    this.fastReplace = false;
    this.selectedIndex = -1;
    this.inputHandler = null;
    this.view = null;
    this.handleDocumentClick = this.handleDocumentClick.bind(this);
    this.handleKeyDown = this.handleKeyDown.bind(this);
    document.addEventListener("click", this.handleDocumentClick);
    document.addEventListener("keydown", this.handleKeyDown);
  }
  createElement() {
    const popup = document.createElement("div");
    popup.style.cssText = `
            position: absolute;
            background: var(--background-primary);
            border: 1px solid var(--background-modifier-border);
            padding: 2px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            display: none;
            white-space: nowrap;
            z-index: 10000;
        `;
    document.body.appendChild(popup);
    return popup;
  }
  show(x, y, match, replacements, inputHandler, fastReplace = false, view) {
    this.currentMatch = match;
    this.currentReplacements = replacements;
    this.selectedIndex = -1;
    this.inputHandler = inputHandler;
    this.fastReplace = fastReplace && replacements.length === 1;
    this.element.style.left = `${x + 5}px`;
    this.element.style.bottom = `${window.innerHeight - y}px`;
    this.element.style.top = "auto";
    this.element.style.display = "block";
    this.isVisible = true;
    this.view = view;
    this.updateContent(view);
  }
  hide() {
    this.element.style.display = "none";
    this.element.innerHTML = "";
    this.isVisible = false;
    this.selectedIndex = -1;
    this.currentMatch = null;
    this.currentReplacements = null;
    this.view = null;
  }
  updateContent(view) {
    if (!this.currentMatch || !this.currentReplacements)
      return;
    this.element.innerHTML = "";
    const styleElement = document.createElement("style");
    const cssRule = `
          p {
            display: inline;
            margin: 0;
            padding: 0;
          }
        `;
    styleElement.textContent = cssRule;
    this.element.appendChild(styleElement);
    this.currentReplacements.forEach((option, index) => {
      const appliedReplacement = option.startsWith(TEMPLATE_PREFIX) ? option.slice(TEMPLATE_PREFIX.length) : option;
      const span = document.createElement("span");
      span.id = `suggestion-${index}`;
      span.style.cssText = `
                cursor: pointer;
                padding: 5px;
                display: inline;
            `;
      span.addEventListener("mouseover", () => {
        if (index !== this.selectedIndex) {
          span.style.background = "var(--background-secondary)";
        }
      });
      span.addEventListener("mouseout", () => {
        if (index !== this.selectedIndex) {
          span.style.background = "var(--background-primary)";
        }
      });
      span.addEventListener("click", () => {
        this.selectSuggestion(index);
      });
      const indicatorSpan = document.createElement("span");
      if (this.fastReplace && this.currentReplacements.length === 1) {
        indicatorSpan.style.cssText = `
                    color: #22c55e;
                    margin-right: 2px;
                    font-size: 0.6em;
                `;
        indicatorSpan.textContent = "\u26A1";
      } else {
        indicatorSpan.style.cssText = `
                    font-size: 0.7em;
                    color: #888;
                    margin-right: 2px;
                `;
        indicatorSpan.textContent = `${index + 1}.`;
      }
      const mathSpan = document.createElement("span");
      span.appendChild(indicatorSpan);
      span.appendChild(mathSpan);
      this.element.appendChild(span);
      import_obsidian.MarkdownRenderer.renderMarkdown(`$${appliedReplacement}$`, mathSpan, view.file.path, view);
    });
  }
  updateSelectedSuggestion() {
    const suggestions = this.element.querySelectorAll('span[id^="suggestion-"]');
    suggestions.forEach((span) => {
      span.style.background = "var(--background-primary)";
    });
    if (this.selectedIndex >= 0) {
      const selectedSpan = this.element.querySelector(`#suggestion-${this.selectedIndex}`);
      if (selectedSpan) {
        selectedSpan.style.background = "var(--background-secondary)";
      }
    }
  }
  selectSuggestion(index) {
    if (!this.currentReplacements || !this.view)
      return;
    if (index >= 0 && index < this.currentReplacements.length) {
      const replacement = this.currentReplacements[index];
      if (replacement.startsWith(TEMPLATE_PREFIX)) {
        const form = new TemplateForm(replacement.slice(TEMPLATE_PREFIX.length), this.inputHandler);
        form.show();
      } else {
        const start = this.view.editor.offsetToPos(this.view.editor.posToOffset(this.view.editor.getCursor()) - this.currentMatch.length);
        this.view.editor.replaceRange(replacement, start, this.view.editor.getCursor());
      }
      this.hide();
    }
  }
  handleKeyDown(e) {
    if (!this.isVisible || !this.currentReplacements)
      return;
    if (this.fastReplace && !/^[a-zA-Z0-9]$/.test(e.key) && !["Escape", "Tab", "Backspace"].includes(e.key)) {
      this.selectSuggestion(0);
      return;
    }
    switch (e.key) {
      case "Escape":
        this.hide();
        e.preventDefault();
        break;
      case "Tab":
        e.preventDefault();
        if (this.selectedIndex < this.currentReplacements.length - 1) {
          this.selectedIndex++;
        } else {
          this.selectedIndex = 0;
        }
        this.updateSelectedSuggestion();
        break;
      case "Enter":
        if (this.selectedIndex >= 0) {
          e.preventDefault();
          this.selectSuggestion(this.selectedIndex);
        }
        break;
      default:
        if (e.key >= "1" && e.key <= "9") {
          const index = parseInt(e.key) - 1;
          if (index < this.currentReplacements.length) {
            this.selectSuggestion(index);
            e.preventDefault();
          }
        }
    }
  }
  handleDocumentClick(e) {
    if (this.isVisible && !this.element.contains(e.target)) {
      this.hide();
    }
  }
  destroy() {
    document.removeEventListener("click", this.handleDocumentClick);
    document.removeEventListener("keydown", this.handleKeyDown);
    if (this.element && this.element.parentNode) {
      this.element.parentNode.removeChild(this.element);
    }
  }
};

// match_form.ts
var MatchForm2 = class {
  constructor(configManager, matchData = null) {
    this.configManager = configManager;
    this.config = configManager.config;
    this.matchData = matchData;
    this.element = this.createElement();
    this.attachEventListeners();
    this.populateReplacements();
  }
  createElement() {
    var _a;
    const form = document.createElement("div");
    form.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--background-primary);
            border: 1px solid var(--background-modifier-border);
            border-radius: 4px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 10003;
            max-width: 80%;
            max-height: 80%;
            overflow-y: auto;
        `;
    const fastReplaceHtml = `
            <div class="fast-replace-section" style="margin-top: 15px; margin-bottom: 15px;">
                <label style="display: flex; align-items: center; gap: 8px;">
                    <input type="checkbox" id="fastReplace" ${((_a = this.matchData) == null ? void 0 : _a.fastReplace) ? "checked" : ""}>
                    <span style="display: flex; align-items: center;">
                        Fast Replace
                        <span style="color: #22c55e; margin-left: 4px;">\u26A1</span>
                    </span>
                </label>
                <div style="font-size: 0.8em; color: #666; margin-top: 4px;">
                    Enables quick replacement with any non-alphanumeric character
                </div>
            </div>
        `;
    form.innerHTML = `
            <h2>${this.matchData ? "Edit Pattern" : "Create New Pattern"}</h2>
            <label for="pattern">Pattern (regex):</label>
            <input type="text" id="pattern" value="${this.matchData ? this.matchData.pattern : ""}"><br><br>
            ${fastReplaceHtml}
            <div id="replacements"></div>
            <button id="addReplacement">Add Replacement</button><br><br>
            <button id="saveMatch">Save</button>
            <button id="cancelMatch">Cancel</button>
        `;
    document.body.appendChild(form);
    return form;
  }
  attachEventListeners() {
    const addReplacementButton = this.element.querySelector("#addReplacement");
    const saveMatchButton = this.element.querySelector("#saveMatch");
    const cancelMatchButton = this.element.querySelector("#cancelMatch");
    if (addReplacementButton && saveMatchButton && cancelMatchButton) {
      addReplacementButton.addEventListener("click", () => {
        this.addReplacementField();
        this.updateFastReplaceState();
      });
      saveMatchButton.addEventListener("click", () => this.saveMatch());
      cancelMatchButton.addEventListener("click", () => this.hide());
    }
  }
  updateFastReplaceState() {
    const fastReplaceCheckbox = this.element.querySelector("#fastReplace");
    const replacements = this.element.querySelectorAll("#replacements fieldset");
    if (fastReplaceCheckbox) {
      if (replacements.length > 1) {
        fastReplaceCheckbox.checked = false;
        fastReplaceCheckbox.disabled = true;
        fastReplaceCheckbox.title = "Fast replace is only available for patterns with a single replacement";
      } else {
        fastReplaceCheckbox.disabled = false;
        fastReplaceCheckbox.title = "";
      }
    }
  }
  populateReplacements() {
    if (this.matchData) {
      this.matchData.replacements.forEach((replacement) => {
        const isTemplate = replacement.startsWith("T:");
        const actualReplacement = isTemplate ? replacement.slice(2) : replacement;
        this.addReplacementField(actualReplacement, isTemplate);
      });
    } else {
      this.addReplacementField();
    }
  }
  addReplacementField(replacement = "", isTemplate = false) {
    const replacementsDiv = this.element.querySelector("#replacements");
    if (!replacementsDiv)
      return;
    const fieldSet = document.createElement("fieldset");
    fieldSet.style.cssText = `
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        `;
    fieldSet.innerHTML = `
            <div style="display: flex; align-items: center; gap: 10px;">
                <div style="flex-grow: 1;">
                    <label for="replacement">Replacement:</label>
                    <input type="text" class="replacement" value="${replacement}" style="width: 100%;">
                </div>
                <div>
                    <label style="display: flex; align-items: center; gap: 4px;">
                        <input type="checkbox" class="template-checkbox" ${isTemplate ? "checked" : ""}>
                        Template
                    </label>
                </div>
                <button class="removeReplacement" style="margin-left: auto;">Remove</button>
            </div>
        `;
    const removeButton = fieldSet.querySelector(".removeReplacement");
    if (removeButton) {
      removeButton.addEventListener("click", () => {
        fieldSet.remove();
        this.updateFastReplaceState();
      });
    }
    replacementsDiv.appendChild(fieldSet);
  }
  saveMatch() {
    const patternInput = this.element.querySelector("#pattern");
    const fastReplaceCheckbox = this.element.querySelector("#fastReplace");
    const replacementFieldsets = this.element.querySelectorAll("#replacements fieldset");
    if (!patternInput)
      return;
    const pattern = patternInput.value;
    const replacements = Array.from(replacementFieldsets).map((fieldset) => {
      const replacementInput = fieldset.querySelector(".replacement");
      const templateCheckbox = fieldset.querySelector(".template-checkbox");
      const replacementValue = (replacementInput == null ? void 0 : replacementInput.value) || "";
      const isTemplate = (templateCheckbox == null ? void 0 : templateCheckbox.checked) || false;
      return isTemplate ? `T:${replacementValue}` : replacementValue;
    });
    const fastReplace = (fastReplaceCheckbox == null ? void 0 : fastReplaceCheckbox.checked) || false;
    if (this.matchData) {
      const oldPatternIndex = this.config.patterns.findIndex((p) => p.pattern === this.matchData.pattern);
      if (oldPatternIndex !== -1) {
        this.config.patterns.splice(oldPatternIndex, 1);
      }
    }
    this.config.patterns.push({
      pattern,
      replacements,
      fastReplace
    });
    this.configManager.updateConfig(this.config);
    this.hide();
  }
  show() {
    this.element.style.display = "block";
  }
  hide() {
    this.element.style.display = "none";
    this.element.remove();
  }
};

// config_dialog.ts
var ConfigDialog = class {
  constructor(configManager) {
    this.element = this.createElement();
    this.configManager = configManager;
    this.config = configManager.config;
    this.handleDocumentClick = this.handleDocumentClick.bind(this);
    this.isVisible = false;
  }
  createElement() {
    const dialog = document.createElement("div");
    dialog.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            display: none;
            z-index: 10002;
            max-width: 80%;
            max-height: 80%;
            width: auto;
            overflow-y: auto;
        `;
    document.body.appendChild(dialog);
    return dialog;
  }
  createEditButton(conf) {
    const button = document.createElement("button");
    button.innerHTML = "\u270F\uFE0F";
    button.style.cssText = `
            margin-left: 8px;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 16px;
            padding: 2px 6px;
            border-radius: 4px;
            vertical-align: middle;
        `;
    button.title = "Edit pattern";
    button.addEventListener("click", (e) => {
      e.stopPropagation();
      const matchForm = new MatchForm2(this.configManager, conf);
      matchForm.show();
      this.hide();
    });
    return button;
  }
  show(selectedText) {
    this.element.innerHTML = "";
    const title = document.createElement("h2");
    title.innerHTML = `Matching Patterns for <code>${selectedText}</code>`;
    this.element.appendChild(title);
    const matches = this.configManager.matcher.getMatchingPatterns(selectedText);
    for (const { value, wildcardMatches } of matches) {
      const { pattern, replacements, fastReplace } = value;
      const patternDiv = document.createElement("div");
      const patternHeader = document.createElement("h3");
      patternHeader.style.display = "flex";
      patternHeader.style.alignItems = "center";
      if (fastReplace && replacements.length === 1) {
        const fastReplaceIcon = document.createElement("span");
        fastReplaceIcon.style.cssText = `
                    color: #22c55e;
                    margin-right: 8px;
                `;
        fastReplaceIcon.title = "Fast Replace Enabled";
        fastReplaceIcon.textContent = "\u26A1";
        patternHeader.appendChild(fastReplaceIcon);
      }
      const patternText = document.createElement("span");
      patternText.innerHTML = `Pattern: <code>${pattern}</code>`;
      patternHeader.appendChild(patternText);
      patternHeader.appendChild(this.createEditButton(value));
      patternDiv.appendChild(patternHeader);
      const replacementsList = document.createElement("ul");
      replacementsList.innerHTML = replacements.map((r) => {
        const rendered = (() => {
          if (r.startsWith("T:")) {
            return r.slice(2);
          } else {
            return this.configManager.matcher.replacePlaceholders(r, wildcardMatches);
          }
        })();
        return `<li>$${rendered}$ <code>[${r}]</code></li>`;
      }).join("");
      patternDiv.appendChild(replacementsList);
      this.element.appendChild(patternDiv);
      window.MathJax.typesetPromise([patternDiv]);
    }
    if (matches.length === 0) {
      const noMatch = document.createElement("p");
      noMatch.textContent = "No matching patterns found.";
      this.element.appendChild(noMatch);
    }
    const closeButton = document.createElement("button");
    closeButton.textContent = "Close";
    closeButton.onclick = () => {
      this.hide();
    };
    this.element.appendChild(closeButton);
    this.element.style.display = "block";
    this.isVisible = true;
  }
  hide() {
    this.element.style.display = "none";
    this.isVisible = false;
  }
  handleDocumentClick(e) {
    if (this.isVisible && !this.element.contains(e.target)) {
      this.hide();
    }
  }
};

// selection_button.ts
var import_obsidian2 = __toModule(require("obsidian"));
var SelectionButton = class extends import_obsidian2.Component {
  constructor(configManager, configDialog) {
    super();
    this.configManager = configManager;
    this.selectionTimeout = null;
    this.configDialog = configDialog;
    this.hasMatch = false;
  }
  onload() {
    this.element = this.createElement();
    this.attachEventListeners();
  }
  createElement() {
    const button = document.createElement("button");
    button.style.cssText = `
            position: absolute;
            display: none;
            border: 1px solid #ccc;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            z-index: 10001;
            font-size: 16px;
            line-height: 24px;
            text-align: center;
            padding: 0;
        `;
    document.body.appendChild(button);
    return button;
  }
  attachEventListeners() {
    this.registerDomEvent(this.element, "click", () => {
      var _a, _b, _c;
      const selectedText = (_b = (_a = window.getSelection()) == null ? void 0 : _a.toString().trim()) != null ? _b : "";
      if (this.hasMatch) {
        this.configDialog.show(selectedText);
      } else {
        const matchForm = new MatchForm(this.configManager, { pattern: selectedText, replacements: [] });
        matchForm.show();
      }
      (_c = window.getSelection()) == null ? void 0 : _c.empty();
      this.hide();
    });
    this.registerDomEvent(document, "keyup", () => {
      this.hide();
    });
    this.registerDomEvent(document, "mouseup", () => {
      this.handleSelection();
    });
  }
  show(x, y) {
    this.element.style.left = `${x}px`;
    this.element.style.top = `${y}px`;
    this.element.style.display = "block";
  }
  hide() {
    this.element.style.display = "none";
  }
  handleSelection() {
    if (this.selectionTimeout) {
      clearTimeout(this.selectionTimeout);
    }
    this.selectionTimeout = window.setTimeout(() => {
      var _a;
      const selection = window.getSelection();
      const selectedText = (_a = selection == null ? void 0 : selection.toString().trim()) != null ? _a : "";
      if (selectedText.length > 0) {
        this.hasMatch = this.configManager.matcher.getMatchingPatterns(selectedText).length > 0;
        this.updateButtonAppearance();
        const range = selection == null ? void 0 : selection.getRangeAt(0);
        const rect = range == null ? void 0 : range.getBoundingClientRect();
        if (rect) {
          this.show(rect.right + window.pageXOffset, rect.top + window.pageYOffset);
        }
      } else {
        this.hide();
      }
    }, 70);
  }
  updateButtonAppearance() {
    if (this.hasMatch) {
      this.element.textContent = "\u2699\uFE0F";
      this.element.title = "View matching patterns";
    } else {
      this.element.textContent = "+";
      this.element.title = "Add new pattern";
    }
  }
};

// main.ts
var WordPopupPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    this.configManager = new ConfigManager(this);
    await this.configManager.loadConfig();
    this.suggestionPopup = new SuggestionPopup();
    this.configDialog = new ConfigDialog(this.configManager);
    this.selectionButton = new SelectionButton(this.configManager, this.configDialog);
    this.addChild(this.selectionButton);
    this.registerEvent(this.app.workspace.on("editor-change", (editor, view) => {
      this.handleEditorChange(editor, view);
    }));
    console.log("Plugin Loaded");
  }
  onunload() {
    this.suggestionPopup.destroy();
  }
  async handleEditorChange(editor, view) {
    const cursor = editor.getCursor();
    const line = editor.getLine(cursor.line);
    const wordUnderCursor = this.getWordUnderCursor(line, cursor.ch);
    const suggestions = this.configManager.matcher.getSuggestions(wordUnderCursor);
    if (suggestions.suggestions.length > 0) {
      const coords = editor.coordsAtPos(cursor);
      if (!coords)
        return;
      this.suggestionPopup.show(coords.left, coords.top, wordUnderCursor, suggestions.suggestions, null, suggestions.fastReplace, view);
    } else {
      this.suggestionPopup.hide();
    }
  }
  hasUnclosedMathSection(str) {
    let inMathMode = false;
    let isDoubleDollar = false;
    for (let i = 0; i < str.length; i++) {
      if (str[i] === "\\" && i + 1 < str.length && str[i + 1] === "$") {
        i++;
        continue;
      }
      if (str[i] === "$" && i + 1 < str.length && str[i + 1] === "$") {
        if (!inMathMode) {
          inMathMode = true;
          isDoubleDollar = true;
          i++;
        } else if (isDoubleDollar) {
          inMathMode = false;
          isDoubleDollar = false;
          i++;
        }
        continue;
      }
      if (str[i] === "$") {
        if (!inMathMode) {
          inMathMode = true;
          isDoubleDollar = false;
        } else if (!isDoubleDollar) {
          inMathMode = false;
        }
      }
    }
    return inMathMode;
  }
  getWordUnderCursor(lineStr, cursorPos) {
    if (!this.hasUnclosedMathSection(lineStr.slice(0, cursorPos))) {
      return "";
    }
    let i = lineStr.length - 1;
    while (i >= 0) {
      if (lineStr[i] == "$" || lineStr[i] == " ") {
        i += 1;
        break;
      } else {
        i -= 1;
      }
    }
    if (i <= 0) {
      return lineStr;
    }
    return lineStr.substr(i);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJwYXR0ZXJuX21hdGNoZXIudHMiLCAiY29uZmlnLnRzIiwgInN1Z2dlc3Rpb25fcG9wdXAudHMiLCAibWF0Y2hfZm9ybS50cyIsICJjb25maWdfZGlhbG9nLnRzIiwgInNlbGVjdGlvbl9idXR0b24udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7XG4gICAgQXBwLFxuICAgIEVkaXRvcixcbiAgICBNYXJrZG93blZpZXcsXG4gICAgUGx1Z2luLFxuICAgIFBvaW50LFxuICAgIEVkaXRvclBvc2l0aW9uLFxuICAgIE1hcmtkb3duUmVuZGVyZXJcbn0gZnJvbSAnb2JzaWRpYW4nO1xuXG5pbXBvcnQgeyBDb25maWdNYW5hZ2VyIH0gZnJvbSBcIi4vY29uZmlnXCJcbmltcG9ydCB7IFN1Z2dlc3Rpb25Qb3B1cCB9IGZyb20gXCIuL3N1Z2dlc3Rpb25fcG9wdXBcIlxuaW1wb3J0IHsgQ29uZmlnRGlhbG9nIH0gZnJvbSBcIi4vY29uZmlnX2RpYWxvZ1wiXG5pbXBvcnQgeyBTZWxlY3Rpb25CdXR0b24gfSBmcm9tIFwiLi9zZWxlY3Rpb25fYnV0dG9uXCJcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXb3JkUG9wdXBQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIGNvbmZpZ01hbmFnZXI6IENvbmZpZ01hbmFnZXI7XG4gICAgc3VnZ2VzdGlvblBvcHVwOiBTdWdnZXN0aW9uUG9wdXA7XG4gICAgc2VsZWN0aW9uQnV0dG9uOiBTZWxlY3Rpb25CdXR0b247XG4gICAgY29uZmlnRGlhbG9nOiBDb25maWdEaWFsb2c7XG4gICAgcG9wdXBFbDogSFRNTEVsZW1lbnQ7XG4gICAgY29udGVudEVsOiBIVE1MRWxlbWVudDtcblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgdGhpcy5jb25maWdNYW5hZ2VyID0gbmV3IENvbmZpZ01hbmFnZXIodGhpcyk7XG4gICAgICAgIGF3YWl0IHRoaXMuY29uZmlnTWFuYWdlci5sb2FkQ29uZmlnKCk7XG4gICAgICAgIHRoaXMuc3VnZ2VzdGlvblBvcHVwID0gbmV3IFN1Z2dlc3Rpb25Qb3B1cCgpO1xuICAgICAgICB0aGlzLmNvbmZpZ0RpYWxvZyA9IG5ldyBDb25maWdEaWFsb2codGhpcy5jb25maWdNYW5hZ2VyKTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25CdXR0b24gPSBuZXcgU2VsZWN0aW9uQnV0dG9uKHRoaXMuY29uZmlnTWFuYWdlciwgdGhpcy5jb25maWdEaWFsb2cpO1xuXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5zZWxlY3Rpb25CdXR0b24pO1xuXG5cbiAgICAgICAgLy8gUmVnaXN0ZXIgZWRpdG9yIGNoYW5nZSBldmVudFxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1jaGFuZ2UnLCAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRWRpdG9yQ2hhbmdlKGVkaXRvciwgdmlldyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUGx1Z2luIExvYWRlZFwiKTtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpIHtcbiAgICAgICAgdGhpcy5zdWdnZXN0aW9uUG9wdXAuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGhhbmRsZUVkaXRvckNoYW5nZShlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSB7XG4gICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICAgICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICAgICAgY29uc3Qgd29yZFVuZGVyQ3Vyc29yID0gdGhpcy5nZXRXb3JkVW5kZXJDdXJzb3IobGluZSwgY3Vyc29yLmNoKTtcblxuICAgICAgICBjb25zdCBzdWdnZXN0aW9ucyA9IHRoaXMuY29uZmlnTWFuYWdlci5tYXRjaGVyLmdldFN1Z2dlc3Rpb25zKHdvcmRVbmRlckN1cnNvcik7XG5cbiAgICAgICAgaWYgKHN1Z2dlc3Rpb25zLnN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGNvb3JkcyA9IGVkaXRvci5jb29yZHNBdFBvcyhjdXJzb3IpO1xuICAgICAgICAgICAgaWYgKCFjb29yZHMpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuc3VnZ2VzdGlvblBvcHVwLnNob3coXG4gICAgICAgICAgICAgICAgY29vcmRzLmxlZnQsXG4gICAgICAgICAgICAgICAgY29vcmRzLnRvcCxcbiAgICAgICAgICAgICAgICB3b3JkVW5kZXJDdXJzb3IsXG4gICAgICAgICAgICAgICAgc3VnZ2VzdGlvbnMuc3VnZ2VzdGlvbnMsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBzdWdnZXN0aW9ucy5mYXN0UmVwbGFjZSxcbiAgICAgICAgICAgICAgICB2aWV3LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3VnZ2VzdGlvblBvcHVwLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhc1VuY2xvc2VkTWF0aFNlY3Rpb24oc3RyKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBpbk1hdGhNb2RlID0gZmFsc2U7XG4gICAgICAgIGxldCBpc0RvdWJsZURvbGxhciA9IGZhbHNlO1xuXG4gICAgICAgIC8vIFByb2Nlc3Mgc3RyaW5nIGNoYXJhY3RlciBieSBjaGFyYWN0ZXJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBlc2NhcGVkIGRvbGxhciBzaWduc1xuICAgICAgICAgICAgaWYgKHN0cltpXSA9PT0gJ1xcXFwnICYmIGkgKyAxIDwgc3RyLmxlbmd0aCAmJiBzdHJbaSArIDFdID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBpKys7IC8vIFNraXAgdGhlIGVzY2FwZWQgZG9sbGFyIHNpZ25cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGRvdWJsZSBkb2xsYXIgc2lnbnNcbiAgICAgICAgICAgIGlmIChzdHJbaV0gPT09ICckJyAmJiBpICsgMSA8IHN0ci5sZW5ndGggJiYgc3RyW2kgKyAxXSA9PT0gJyQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbk1hdGhNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGluTWF0aE1vZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpc0RvdWJsZURvbGxhciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGkrKzsgLy8gU2tpcCBzZWNvbmQgZG9sbGFyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0RvdWJsZURvbGxhcikge1xuICAgICAgICAgICAgICAgICAgICBpbk1hdGhNb2RlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlzRG91YmxlRG9sbGFyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGkrKzsgLy8gU2tpcCBzZWNvbmQgZG9sbGFyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBIYW5kbGUgc2luZ2xlIGRvbGxhciBzaWduc1xuICAgICAgICAgICAgaWYgKHN0cltpXSA9PT0gJyQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbk1hdGhNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGluTWF0aE1vZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpc0RvdWJsZURvbGxhciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzRG91YmxlRG9sbGFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGluTWF0aE1vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluTWF0aE1vZGU7XG4gICAgfVxuXG5cbiAgICBnZXRXb3JkVW5kZXJDdXJzb3IobGluZVN0cjogc3RyaW5nLCBjdXJzb3JQb3M6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGlmICghdGhpcy5oYXNVbmNsb3NlZE1hdGhTZWN0aW9uKGxpbmVTdHIuc2xpY2UoMCwgY3Vyc29yUG9zKSkpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICBsZXQgaSA9IGxpbmVTdHIubGVuZ3RoIC0gMTtcbiAgICAgICAgd2hpbGUgKGkgPj0gMCkge1xuICAgICAgICAgICAgaWYgKGxpbmVTdHJbaV0gPT0gJyQnIHx8IGxpbmVTdHJbaV0gPT0gJyAnICl7XG4gICAgICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpIC09IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGk8PTApIHtcbiAgICAgICAgICAgIHJldHVybiBsaW5lU3RyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5lU3RyLnN1YnN0cihpKTtcbiAgICB9XG5cbn1cbiIsICJpbXBvcnQgeyBQYXR0ZXJuIH0gZnJvbSBcIi4vY29uZmlnXCJcblxuLy8gSW50ZXJmYWNlIGZvciB0cmllIHRlcm0gc3RydWN0dXJlXG5pbnRlcmZhY2UgVHJpZVRlcm0ge1xuICAgIHRlcm06IHN0cmluZztcbiAgICB2YWx1ZTogUGF0dGVybjtcbn1cblxuLy8gSW50ZXJmYWNlIGZvciBsb29rdXAgcmVzdWx0c1xuaW50ZXJmYWNlIExvb2t1cFJlc3VsdCB7XG4gICAgdmFsdWU6IFBhdHRlcm47XG4gICAgbWF0Y2g6IHN0cmluZ1tdO1xufVxuXG4vLyBJbnRlcmZhY2UgZm9yIHN1Z2dlc3Rpb24gcmVzdWx0c1xuaW50ZXJmYWNlIFN1Z2dlc3Rpb25SZXN1bHQge1xuICAgIHN1Z2dlc3Rpb25zOiBzdHJpbmdbXTtcbiAgICBmYXN0UmVwbGFjZTogYm9vbGVhbjtcbn1cblxuY2xhc3MgVHJpZU5vZGUge1xuICAgIGNoaWxkcmVuOiB7IFtrZXk6IHN0cmluZ106IFRyaWVOb2RlIH07XG4gICAgdmFsdWU6IFBhdHRlcm4gfCBudWxsO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSB7fTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBUcmllIHtcbiAgICBwcml2YXRlIHJvb3Q6IFRyaWVOb2RlO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhbiBpbW11dGFibGUgVHJpZS5cbiAgICAgKiBAcGFyYW0gdGVybXMgLSBBcnJheSBvZiB0ZXJtcyB3aXRoIGFzc29jaWF0ZWQgdmFsdWVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRlcm1zOiBUcmllVGVybVtdKSB7XG4gICAgICAgIHRoaXMucm9vdCA9IG5ldyBUcmllTm9kZSgpO1xuICAgICAgICBmb3IgKGNvbnN0IHsgdGVybSwgdmFsdWUgfSBvZiB0ZXJtcykge1xuICAgICAgICAgICAgdGhpcy5pbnNlcnQodGVybSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5zZXJ0cyBhIHRlcm0gd2l0aCBpdHMgYXNzb2NpYXRlZCB2YWx1ZSBpbnRvIHRoZSB0cmllLlxuICAgICAqIEBwYXJhbSB0ZXJtIC0gVGhlIHRlcm0gdG8gaW5zZXJ0IChtYXkgY29udGFpbiB3aWxkY2FyZHMgJyonKS5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoZSB0ZXJtLlxuICAgICAqL1xuICAgIHByaXZhdGUgaW5zZXJ0KHRlcm06IHN0cmluZywgdmFsdWU6IFBhdHRlcm4pOiB2b2lkIHtcbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoY29uc3QgY2hhciBvZiB0ZXJtKSB7XG4gICAgICAgICAgICBpZiAoIW5vZGUuY2hpbGRyZW5bY2hhcl0pIHtcbiAgICAgICAgICAgICAgICBub2RlLmNoaWxkcmVuW2NoYXJdID0gbmV3IFRyaWVOb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlID0gbm9kZS5jaGlsZHJlbltjaGFyXTtcbiAgICAgICAgfVxuICAgICAgICBub2RlLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYSBzdHJpbmcgaW4gdGhlIHRyaWUsIG1hdGNoaW5nIHRlcm1zIHRoYXQgbWF5IGNvbnRhaW4gd2lsZGNhcmRzICcqJy5cbiAgICAgKiBDb2xsZWN0cyBhbGwgbWF0Y2hpbmcgdmFsdWVzIGFuZCB0aGUgY2hhcmFjdGVycyBtYXRjaGVkIGJ5IHdpbGRjYXJkcy5cbiAgICAgKiBAcGFyYW0gcXVlcnkgLSBUaGUgc3RyaW5nIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgbWF0Y2hpbmcgcmVzdWx0cy5cbiAgICAgKi9cbiAgICBsb29rdXAocXVlcnk6IHN0cmluZyk6IExvb2t1cFJlc3VsdFtdIHtcbiAgICAgICAgY29uc3QgcmVzdWx0czogTG9va3VwUmVzdWx0W10gPSBbXTtcbiAgICAgICAgY29uc3QgdmlzaXRlZCA9IG5ldyBTZXQ8VHJpZU5vZGU+KCk7XG5cbiAgICAgICAgdGhpcy5fbG9va3VwSGVscGVyKHRoaXMucm9vdCwgcXVlcnksIDAsIHJlc3VsdHMsIFtdLCB2aXNpdGVkKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG5cbiAgICBwcml2YXRlIF9sb29rdXBIZWxwZXIoXG4gICAgICAgIG5vZGU6IFRyaWVOb2RlLFxuICAgICAgICBxdWVyeTogc3RyaW5nLFxuICAgICAgICBpbmRleDogbnVtYmVyLFxuICAgICAgICByZXN1bHRzOiBMb29rdXBSZXN1bHRbXSxcbiAgICAgICAgd2lsZGNhcmRNYXRjaGVzOiBzdHJpbmdbXSxcbiAgICAgICAgdmlzaXRlZDogU2V0PFRyaWVOb2RlPlxuICAgICk6IHZvaWQge1xuICAgICAgICBpZiAoaW5kZXggPT09IHF1ZXJ5Lmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKG5vZGUudmFsdWUgIT09IG51bGwgJiYgIXZpc2l0ZWQuaGFzKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5vZGUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoOiB3aWxkY2FyZE1hdGNoZXMuc2xpY2UoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2aXNpdGVkLmFkZChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNoYXIgPSBxdWVyeVtpbmRleF07XG5cbiAgICAgICAgLy8gRmlyc3QsIHRyeSBleGFjdCBjaGFyYWN0ZXIgbWF0Y2hcbiAgICAgICAgaWYgKG5vZGUuY2hpbGRyZW5bY2hhcl0pIHtcbiAgICAgICAgICAgIHRoaXMuX2xvb2t1cEhlbHBlcihcbiAgICAgICAgICAgICAgICBub2RlLmNoaWxkcmVuW2NoYXJdLFxuICAgICAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgICAgIGluZGV4ICsgMSxcbiAgICAgICAgICAgICAgICByZXN1bHRzLFxuICAgICAgICAgICAgICAgIHdpbGRjYXJkTWF0Y2hlcyxcbiAgICAgICAgICAgICAgICB2aXNpdGVkXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlbiwgdHJ5IHdpbGRjYXJkIG1hdGNoXG4gICAgICAgIGlmIChjaGFyLm1hdGNoKC9eWzAtOWEtel0rJC8pICYmIG5vZGUuY2hpbGRyZW5bJyonXSkge1xuICAgICAgICAgICAgY29uc3QgbmV3V2lsZGNhcmRNYXRjaGVzID0gd2lsZGNhcmRNYXRjaGVzLmNvbmNhdChjaGFyKTtcbiAgICAgICAgICAgIHRoaXMuX2xvb2t1cEhlbHBlcihcbiAgICAgICAgICAgICAgICBub2RlLmNoaWxkcmVuWycqJ10sXG4gICAgICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICAgICAgaW5kZXggKyAxLFxuICAgICAgICAgICAgICAgIHJlc3VsdHMsXG4gICAgICAgICAgICAgICAgbmV3V2lsZGNhcmRNYXRjaGVzLFxuICAgICAgICAgICAgICAgIHZpc2l0ZWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCB2YWx1ZXMgb2YgdGVybXMgdGhhdCBzdGFydCB3aXRoIHRoZSBnaXZlbiBxdWVyeSBzdHJpbmcuXG4gICAgICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHN0cmluZy5cbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiB2YWx1ZXMgYXNzb2NpYXRlZCB3aXRoIG1hdGNoaW5nIHRlcm1zLlxuICAgICAqL1xuICAgIHR5cGVBaGVhZChxdWVyeTogc3RyaW5nKTogUGF0dGVybltdIHtcbiAgICAgICAgbGV0IG5vZGVzID0gW3sgbm9kZTogdGhpcy5yb290LCBpbmRleDogMCB9XTtcbiAgICAgICAgY29uc3QgcmVzdWx0czogUGF0dGVybltdID0gW107XG4gICAgICAgIGNvbnN0IGNvbGxlY3RlZE5vZGVzID0gbmV3IFNldDxUcmllTm9kZT4oKTtcblxuICAgICAgICB3aGlsZSAobm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbGV0IG5leHROb2RlcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCB7IG5vZGUsIGluZGV4IH0gb2Ygbm9kZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IHF1ZXJ5Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2xsZWN0VmFsdWVzKG5vZGUsIHJlc3VsdHMsIGNvbGxlY3RlZE5vZGVzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFyID0gcXVlcnlbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5jaGlsZHJlbltjaGFyXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUuY2hpbGRyZW5bY2hhcl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFyLm1hdGNoKC9eWzAtOWEtel0rJC8pICYmIG5vZGUuY2hpbGRyZW5bJyonXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUuY2hpbGRyZW5bJyonXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaW5kZXggKyAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlcyA9IG5leHROb2RlcztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NvbGxlY3RWYWx1ZXMoXG4gICAgICAgIHN0YXJ0Tm9kZTogVHJpZU5vZGUsXG4gICAgICAgIHJlc3VsdHM6IFBhdHRlcm5bXSxcbiAgICAgICAgY29sbGVjdGVkTm9kZXM6IFNldDxUcmllTm9kZT5cbiAgICApOiB2b2lkIHtcbiAgICAgICAgbGV0IHF1ZXVlID0gW3N0YXJ0Tm9kZV07XG4gICAgICAgIGNvbnN0IHZpc2l0ZWROb2RlcyA9IG5ldyBTZXQ8VHJpZU5vZGU+KCk7XG5cbiAgICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBxdWV1ZS5zaGlmdCgpITtcblxuICAgICAgICAgICAgaWYgKHZpc2l0ZWROb2Rlcy5oYXMobm9kZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZpc2l0ZWROb2Rlcy5hZGQobm9kZSk7XG5cbiAgICAgICAgICAgIGlmIChub2RlLnZhbHVlICE9PSBudWxsICYmICFjb2xsZWN0ZWROb2Rlcy5oYXMobm9kZSkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gobm9kZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgY29sbGVjdGVkTm9kZXMuYWRkKG5vZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkTm9kZSBvZiBPYmplY3QudmFsdWVzKG5vZGUuY2hpbGRyZW4pKSB7XG4gICAgICAgICAgICAgICAgcXVldWUucHVzaChjaGlsZE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBSZWdleE1hdGNoZXIge1xuICAgIHByaXZhdGUgcGF0dGVybnM6IHsgcmVnZXg6IFJlZ0V4cDsgcmVwbGFjZW1lbnRzOiBzdHJpbmdbXSB9W107XG5cbiAgICBjb25zdHJ1Y3RvcihwYXR0ZXJuczogUGF0dGVybltdKSB7XG4gICAgICAgIHRoaXMucGF0dGVybnMgPSBwYXR0ZXJucy5tYXAoKHApID0+ICh7XG4gICAgICAgICAgICByZWdleDogbmV3IFJlZ0V4cChwLnBhdHRlcm4pLFxuICAgICAgICAgICAgcmVwbGFjZW1lbnRzOiBwLnJlcGxhY2VtZW50cyxcbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIGFkZFBhdHRlcm4ocGF0dGVybjogUGF0dGVybik6IHZvaWQge1xuICAgICAgICB0aGlzLnBhdHRlcm5zLnB1c2goe1xuICAgICAgICAgICAgcmVnZXg6IG5ldyBSZWdFeHAocGF0dGVybi5wYXR0ZXJuKSxcbiAgICAgICAgICAgIHJlcGxhY2VtZW50czogcGF0dGVybi5yZXBsYWNlbWVudHMsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFN1Z2dlc3Rpb25zKGlucHV0OiBzdHJpbmcpOiBTdWdnZXN0aW9uUmVzdWx0IHtcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGxldCBmYXN0UmVwbGFjZSA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiB0aGlzLnBhdHRlcm5zKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gaW5wdXQubWF0Y2gocGF0dGVybi5yZWdleCk7XG5cbiAgICAgICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByZXBsYWNlbWVudCBvZiBwYXR0ZXJuLnJlcGxhY2VtZW50cykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gcmVwbGFjZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbWF0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoYCQke2l9YCwgbWF0Y2hlc1tpXSB8fCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbnMucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IHN1Z2dlc3Rpb25zLCBmYXN0UmVwbGFjZSB9O1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFN1Z2dlc3Rpb25NYXRjaGVyIHtcbiAgICBwcml2YXRlIHRyaWU6IFRyaWU7XG4gICAgcHJpdmF0ZSByZWdleGVzOiBSZWdleE1hdGNoZXI7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgU3VnZ2VzdGlvbk1hdGNoZXIuXG4gICAgICogQHBhcmFtIHBhdHRlcm5zIC0gQXJyYXkgb2YgcGF0dGVybiBvYmplY3RzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHBhdHRlcm5zOiBQYXR0ZXJuW10pIHtcbiAgICAgICAgY29uc3QgdHJpZVRlcm1zID0gcGF0dGVybnMuZmxhdE1hcCgoY29uZikgPT4ge1xuICAgICAgICAgICAgaWYgKCFjb25mLnR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW3sgdGVybTogY29uZi5wYXR0ZXJuLCB2YWx1ZTogY29uZiB9XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy50cmllID0gbmV3IFRyaWUodHJpZVRlcm1zKTtcblxuICAgICAgICBjb25zdCByZWdleFRlcm1zID0gcGF0dGVybnMuZmxhdE1hcCgoY29uZikgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbmYudHlwZSAmJiBjb25mLnR5cGUgPT09ICdyZWdleCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2NvbmZdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZWdleGVzID0gbmV3IFJlZ2V4TWF0Y2hlcihyZWdleFRlcm1zKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcGxhY2VQbGFjZWhvbGRlcnModmFsdWU6IHN0cmluZywgbWF0Y2hlczogc3RyaW5nW10pOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvXFwkKFsxLTldXFxkKikvZywgKG1hdGNoLCBpbmRleFN0cikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChpbmRleFN0ciwgMTApIC0gMTtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IG1hdGNoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXNbaW5kZXhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRNYXRjaGluZ1BhdHRlcm5zKHNlYXJjaFN0cmluZzogc3RyaW5nKTogTG9va3VwUmVzdWx0W10ge1xuICAgICAgICByZXR1cm4gdGhpcy50cmllLmxvb2t1cChzZWFyY2hTdHJpbmcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgc2VhcmNoIHN0cmluZyBhcyBpbnB1dCBhbmQgcmV0dXJucyBhIGNvbWJpbmVkIGFycmF5IG9mIGFsbCByZXBsYWNlbWVudHNcbiAgICAgKiBmb3IgYWxsIG1hdGNoZXMsIHdpdGggdGhlIHBsYWNlaG9sZGVycyByZXBsYWNlZC5cbiAgICAgKiBAcGFyYW0gc2VhcmNoU3RyaW5nIC0gVGhlIHNlYXJjaCBzdHJpbmcuXG4gICAgICogQHJldHVybnMgT2JqZWN0IGNvbnRhaW5pbmcgc3VnZ2VzdGlvbnMgYXJyYXkgYW5kIGZhc3RSZXBsYWNlIGZsYWcuXG4gICAgICovXG4gICAgZ2V0U3VnZ2VzdGlvbnMoc2VhcmNoU3RyaW5nOiBzdHJpbmcpOiBTdWdnZXN0aW9uUmVzdWx0IHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMudHJpZS5sb29rdXAoc2VhcmNoU3RyaW5nKTtcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGxldCBmYXN0UmVwbGFjZSA9IGZhbHNlO1xuXG4gICAgICAgIHJlc3VsdHMuZm9yRWFjaCgoeyB2YWx1ZTogY29uZiwgbWF0Y2g6IHdpbGRjYXJkTWF0Y2hlcyB9KSA9PiB7XG4gICAgICAgICAgICBjb25mLnJlcGxhY2VtZW50cy5mb3JFYWNoKChyZXBsYWNlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1Z2dlc3Rpb24gPSB0aGlzLnJlcGxhY2VQbGFjZWhvbGRlcnMoXG4gICAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50LFxuICAgICAgICAgICAgICAgICAgICB3aWxkY2FyZE1hdGNoZXNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb25zLnB1c2goc3VnZ2VzdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZhc3RSZXBsYWNlID0gZmFzdFJlcGxhY2UgfHwgISFjb25mLmZhc3RSZXBsYWNlO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBycyA9IHRoaXMucmVnZXhlcy5nZXRTdWdnZXN0aW9ucyhzZWFyY2hTdHJpbmcpO1xuICAgICAgICBzdWdnZXN0aW9ucy5wdXNoKC4uLnJzLnN1Z2dlc3Rpb25zKTtcbiAgICAgICAgZmFzdFJlcGxhY2UgPSAoZmFzdFJlcGxhY2UgfHwgcnMuZmFzdFJlcGxhY2UpICYmIHN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMTtcblxuICAgICAgICByZXR1cm4geyBzdWdnZXN0aW9ucywgZmFzdFJlcGxhY2UgfTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgICBQbHVnaW4sXG59IGZyb20gJ29ic2lkaWFuJztcblxuaW1wb3J0IHsgU3VnZ2VzdGlvbk1hdGNoZXIgfSBmcm9tIFwiLi9wYXR0ZXJuX21hdGNoZXJcIlxuXG5cblxuZXhwb3J0IGludGVyZmFjZSBQYXR0ZXJuIHtcbiAgICB0eXBlPzogJ3JlZ2V4JztcbiAgICBwYXR0ZXJuOiBzdHJpbmc7XG4gICAgcmVwbGFjZW1lbnRzOiBzdHJpbmdbXTtcbn1cblxuaW50ZXJmYWNlIE1hdGhDb25maWcge1xuICAgIHJlbmRlck1hdGg6IGJvb2xlYW47XG4gICAgcGF0dGVybnM6IFBhdHRlcm5bXTtcbn1cblxuY29uc3QgREVGQVVMVF9DT05GSUc6IE1hdGhDb25maWcgPSB7XG4gICAgcmVuZGVyTWF0aDogZmFsc2UsXG4gICAgcGF0dGVybnMgOiBbXG4gICAgICAgIC8vIExvZ2ljYWwgb3BlcmF0b3JzXG4gICAgICAgIHsgcGF0dGVybjogJ29yJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxsb3InXSwgZmFzdFJlcGxhY2U6IHRydWUgfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnYW5kJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxsYW5kJ10sIGZhc3RSZXBsYWNlOiB0cnVlIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ25vdCcsIHJlcGxhY2VtZW50czogWydcXFxcbG5vdCddLCBmYXN0UmVwbGFjZTogdHJ1ZSB9LFxuICAgICAgICB7IHBhdHRlcm46ICc9PicsIHJlcGxhY2VtZW50czogWydcXFxcaW1wbGllcyddLCBmYXN0UmVwbGFjZTogdHJ1ZSB9LFxuICAgICAgICB7IHBhdHRlcm46ICc8PT4nLCByZXBsYWNlbWVudHM6IFsnXFxcXGlmZiddLCBmYXN0UmVwbGFjZTogdHJ1ZSB9LFxuXG4gICAgICAgIC8vIEdyZWVrIGxldHRlcnNcbiAgICAgICAgeyBwYXR0ZXJuOiAnYScsIHJlcGxhY2VtZW50czogWydcXFxcYWxwaGEnLCAnXFxcXGFsZXBoJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnYicsIHJlcGxhY2VtZW50czogWydcXFxcYmV0YScsICdcXFxcYmV0aCddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ2cnLCByZXBsYWNlbWVudHM6IFsnXFxcXGdhbW1hJywgJ1xcXFxnaW1lbCddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ2QnLCByZXBsYWNlbWVudHM6IFsnXFxcXGRlbHRhJywgJ1xcXFxkYWxldGgnXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICdlJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxlcHNpbG9uJywgJ1xcXFx2YXJlcHNpbG9uJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAneicsIHJlcGxhY2VtZW50czogWydcXFxcemV0YSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ2gnLCByZXBsYWNlbWVudHM6IFsnXFxcXGV0YSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ3QnLCByZXBsYWNlbWVudHM6IFsnXFxcXHRoZXRhJywgJ1xcXFx2YXJ0aGV0YSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ2knLCByZXBsYWNlbWVudHM6IFsnXFxcXGlvdGEnXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICdrJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxrYXBwYSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ2wnLCByZXBsYWNlbWVudHM6IFsnXFxcXGxhbWJkYSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ20nLCByZXBsYWNlbWVudHM6IFsnXFxcXG11J10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnbicsIHJlcGxhY2VtZW50czogWydcXFxcbnUnXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICd4JywgcmVwbGFjZW1lbnRzOiBbJ1xcXFx4aSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ28nLCByZXBsYWNlbWVudHM6IFsnXFxcXG9taWNyb24nXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICdwJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxwaScsICdcXFxcdmFycGknXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICdyJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxyaG8nLCAnXFxcXHZhcnJobyddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ3MnLCByZXBsYWNlbWVudHM6IFsnXFxcXHNpZ21hJywgJ1xcXFx2YXJzaWdtYSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ3UnLCByZXBsYWNlbWVudHM6IFsnXFxcXHVwc2lsb24nXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICdmJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxwaGknLCAnXFxcXHZhcnBoaSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ2MnLCByZXBsYWNlbWVudHM6IFsnXFxcXGNoaSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ3knLCByZXBsYWNlbWVudHM6IFsnXFxcXHBzaSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ3cnLCByZXBsYWNlbWVudHM6IFsnXFxcXG9tZWdhJ10gfSxcblxuICAgICAgICAvLyBVcHBlcmNhc2UgR3JlZWsgbGV0dGVyc1xuICAgICAgICB7IHBhdHRlcm46ICdFJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxleGlzdHMnXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICdHJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxHYW1tYSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ0QnLCByZXBsYWNlbWVudHM6IFsnXFxcXERlbHRhJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnVCcsIHJlcGxhY2VtZW50czogWydcXFxcVGhldGEnXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICdJJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxJb3RhJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnTCcsIHJlcGxhY2VtZW50czogWydcXFxcTGFtYmRhJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnWCcsIHJlcGxhY2VtZW50czogWydcXFxcWGknXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICdQJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxQaSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ1MnLCByZXBsYWNlbWVudHM6IFsnXFxcXFNpZ21hJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnVScsIHJlcGxhY2VtZW50czogWydcXFxcVXBzaWxvbiddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ0YnLCByZXBsYWNlbWVudHM6IFsnXFxcXFBoaScsICdcXFxcZm9yYWxsJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnWScsIHJlcGxhY2VtZW50czogWydcXFxcUHNpJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnVycsIHJlcGxhY2VtZW50czogWydcXFxcT21lZ2EnXSB9LFxuXG4gICAgICAgIC8vIFBhcmVudGhlc2VzIGFuZCBicmFja2V0c1xuICAgICAgICB7IHBhdHRlcm46ICcoJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxiaWcoJywgJ1xcXFxCaWcoJywgJ1xcXFxiaWdnKCcsICdcXFxcQmlnZygnXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICcpJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxiaWcpJywgJ1xcXFxCaWcpJywgJ1xcXFxiaWdnKScsICdcXFxcQmlnZyknXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICdbJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxiaWdbJywgJ1xcXFxCaWdbJywgJ1xcXFxiaWdnWycsICdcXFxcQmlnZ1snLCAnXFxcXGxjZWlsJywgJ1xcXFxsZmxvb3InLCAnXFxcXHVsY29ybmVyJywgJ1xcXFxsbGNvcm5lciddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ10nLCByZXBsYWNlbWVudHM6IFsnXFxcXGJpZ10nLCAnXFxcXEJpZ10nLCAnXFxcXGJpZ2ddJywgJ1xcXFxCaWdnXScsICdcXFxccmNlaWwnLCAnXFxcXHJmbG9vcicsICdcXFxcdXJjb3JuZXInLCAnXFxcXGxyY29ybmVyJ10gfSxcblxuICAgICAgICAvLyBBcnJvd3NcbiAgICAgICAgeyBwYXR0ZXJuOiAnLT4nLCByZXBsYWNlbWVudHM6IFsnXFxcXHJpZ2h0YXJyb3cnLCAnXFxcXHRvJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnPC0nLCByZXBsYWNlbWVudHM6IFsnXFxcXGxlZnRhcnJvdyddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJzwtPicsIHJlcGxhY2VtZW50czogWydcXFxcbGVmdHJpZ2h0YXJyb3cnXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICc9PicsIHJlcGxhY2VtZW50czogWydcXFxcaW1wbGllcyddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJzw9JywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxsZXEnXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICc+PScsIHJlcGxhY2VtZW50czogWydcXFxcZ2VxJ10gfSxcblxuICAgICAgICAvLyBNYXRoZW1hdGljYWwgb3BlcmF0b3JzXG4gICAgICAgIHsgcGF0dGVybjogJysnLCByZXBsYWNlbWVudHM6IFsnKyddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJy0nLCByZXBsYWNlbWVudHM6IFsnLSddIH0sXG4gICAgICAgIC8veyBwYXR0ZXJuOiAnKicsIHJlcGxhY2VtZW50czogWydcXFxcdGltZXMnLCAnXFxcXGFzdCddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJy8nLCByZXBsYWNlbWVudHM6IFsnXFxcXGRpdiddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ3N1bScsIHJlcGxhY2VtZW50czogWydcXFxcc3VtJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnaW50JywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxpbnQnXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICdsaW0nLCByZXBsYWNlbWVudHM6IFsnXFxcXGxpbSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ2luZicsIHJlcGxhY2VtZW50czogWydcXFxcaW5mdHknXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICdzcXJ0JywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxzcXJ0J10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAncHJvZCcsIHJlcGxhY2VtZW50czogWydcXFxccHJvZCddIH0sXG5cbiAgICAgICAgLy8gUmVsYXRpb25hbCBvcGVyYXRvcnNcbiAgICAgICAgeyBwYXR0ZXJuOiAnPScsIHJlcGxhY2VtZW50czogWyc9J10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnIT0nLCByZXBsYWNlbWVudHM6IFsnXFxcXG5lcSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ349JywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxhcHByb3gnXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICd+ficsIHJlcGxhY2VtZW50czogWydcXFxcc2ltJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnPDwnLCByZXBsYWNlbWVudHM6IFsnXFxcXGxsJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnPj4nLCByZXBsYWNlbWVudHM6IFsnXFxcXGdnJ10gfSxcblxuICAgICAgICAvLyBTZXQgc3ltYm9sc1xuICAgICAgICB7IHBhdHRlcm46ICdpbicsIHJlcGxhY2VtZW50czogWydcXFxcaW4nXSwgZmFzdFJlcGxhY2U6IHRydWUgfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnbmknLCByZXBsYWNlbWVudHM6IFsnXFxcXG5pJ10sIGZhc3RSZXBsYWNlOiB0cnVlIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ3N1YnNldCcsIHJlcGxhY2VtZW50czogWydcXFxcc3Vic2V0JywgJ1xcXFxzdWJzZXRlcSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ3N1cHNldCcsIHJlcGxhY2VtZW50czogWydcXFxcc3Vwc2V0JywgJ1xcXFxzdXBzZXRlcSddfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnZW1wdHknLCByZXBsYWNlbWVudHM6IFsnXFxcXGVtcHR5c2V0J10sIGZhc3RSZXBsYWNlOiB0cnVlIH0sXG5cbiAgICAgICAgLy8gTWlzY2VsbGFuZW91cyBzeW1ib2xzXG4gICAgICAgIHsgcGF0dGVybjogJy4uLicsIHJlcGxhY2VtZW50czogWydcXFxcbGRvdHMnXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICdcdTAwQjAnLCByZXBsYWNlbWVudHM6IFsnXFxcXGRlZ3JlZSddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ1x1MDBBMycsIHJlcGxhY2VtZW50czogWydcXFxccG91bmRzJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnJCcsIHJlcGxhY2VtZW50czogWydcXFxcJCddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJyUnLCByZXBsYWNlbWVudHM6IFsnXFxcXCUnXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICcmJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFwmJ10gfSxcblxuICAgICAgICAvLyBBY2NlbnRzXG4gICAgICAgIHsgcGF0dGVybjogJ2hhdCcsIHJlcGxhY2VtZW50czogWydcXFxcaGF0e30nXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICdiYXInLCByZXBsYWNlbWVudHM6IFsnXFxcXGJhcnt9J10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAndGlsZGUnLCByZXBsYWNlbWVudHM6IFsnXFxcXHRpbGRle30nXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICd2ZWMnLCByZXBsYWNlbWVudHM6IFsnXFxcXHZlY3t9J10gfSxcblxuICAgICAgICAvLyBDb21tb24gZnVuY3Rpb25zXG4gICAgICAgIHsgcGF0dGVybjogJ3NpbicsIHJlcGxhY2VtZW50czogWydcXFxcc2luJ10sIGZhc3RSZXBsYWNlOiB0cnVlIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ2NvcycsIHJlcGxhY2VtZW50czogWydcXFxcY29zJ10sIGZhc3RSZXBsYWNlOiB0cnVlIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ3RhbicsIHJlcGxhY2VtZW50czogWydcXFxcdGFuJ10sIGZhc3RSZXBsYWNlOiB0cnVlIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ2xvZycsIHJlcGxhY2VtZW50czogWydcXFxcbG9nJ10sIGZhc3RSZXBsYWNlOiB0cnVlIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ2xuJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxsbiddLCBmYXN0UmVwbGFjZTogdHJ1ZSB9LFxuICAgICAgICB7IHBhdHRlcm46ICdleHAnLCByZXBsYWNlbWVudHM6IFsnXFxcXGV4cCddLCBmYXN0UmVwbGFjZTogdHJ1ZSB9LFxuXG4gICAgICAgIC8vIEZyYWN0aW9ucyBhbmQgYmlub21pYWxzXG4gICAgICAgIHsgcGF0dGVybjogJ2ZyYWMnLCByZXBsYWNlbWVudHM6IFsnVDpcXFxcZnJhY3skMX17JDJ9J10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnYmlub20nLCByZXBsYWNlbWVudHM6IFsnXFxcXGJpbm9te317fSddIH0sXG5cbiAgICAgICAgLy8gT3ZlciBhbmQgdW5kZXIgc3ltYm9sc1xuICAgICAgICB7IHR5cGU6ICdyZWdleCcsIHBhdHRlcm46ICcoLiopX292ZXIkJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxvdmVybGluZXskMX0nXSB9LFxuICAgICAgICB7IHBhdHRlcm46ICd1bmRlcmxpbmUnLCByZXBsYWNlbWVudHM6IFsnXFxcXHVuZGVybGluZXt9J10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnb3ZlcnNldCcsIHJlcGxhY2VtZW50czogWydcXFxcb3ZlcnNldHt9e319J10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAndW5kZXJzZXQnLCByZXBsYWNlbWVudHM6IFsnXFxcXHVuZGVyc2V0e317fX0nXSB9LFxuXG4gICAgICAgIC8vIExvZ2ljYWwgcXVhbnRpZmllcnNcbiAgICAgICAgeyBwYXR0ZXJuOiAnZm9yYWxsJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxmb3JhbGwnXSwgZmFzdFJlcGxhY2U6IHRydWUgfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnZXhpc3RzJywgcmVwbGFjZW1lbnRzOiBbJ1xcXFxleGlzdHMnXSwgZmFzdFJlcGxhY2U6IHRydWUgfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnbmV4aXN0cycsIHJlcGxhY2VtZW50czogWydcXFxcbmV4aXN0cyddLCBmYXN0UmVwbGFjZTogdHJ1ZSB9LFxuXG4gICAgICAgIC8vIE1pc2NlbGxhbmVvdXNcbiAgICAgICAgeyBwYXR0ZXJuOiAnYWxlcGgnLCByZXBsYWNlbWVudHM6IFsnXFxcXGFsZXBoJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnaGJhcicsIHJlcGxhY2VtZW50czogWydcXFxcaGJhciddIH0sXG4gICAgICAgIHsgcGF0dGVybjogJ2VsbCcsIHJlcGxhY2VtZW50czogWydcXFxcZWxsJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnUmUnLCByZXBsYWNlbWVudHM6IFsnXFxcXFJlJ10gfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAnSW0nLCByZXBsYWNlbWVudHM6IFsnXFxcXEltJ10gfSxcbiAgICBdXG59O1xuXG5leHBvcnQgY2xhc3MgQ29uZmlnTWFuYWdlciB7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHNhdmVDb25maWcoY29uZmlnOiBDb25maWcpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5jb25maWcpO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRDb25maWcoKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9DT05GSUcsIGF3YWl0IHRoaXMucGx1Z2luLmxvYWREYXRhKCkpO1xuICAgICAgICB0aGlzLm1hdGNoZXIgPSBuZXcgU3VnZ2VzdGlvbk1hdGNoZXIodGhpcy5jb25maWcucGF0dGVybnMpO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZUNvbmZpZyhuZXdDb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBuZXdDb25maWc7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZUNvbmZpZyh0aGlzLmNvbmZpZyk7XG4gICAgICAgIHRoaXMubWF0Y2hlciA9IG5ldyBTdWdnZXN0aW9uTWF0Y2hlcih0aGlzLmNvbmZpZy5wYXR0ZXJucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgcmVzZXRDb25maWcoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQ29uZmlnKERFRkFVTFRfQ09ORklHKTtcbiAgICB9XG5cblxufVxuIiwgIi8vaW1wb3J0IHsgVGVtcGxhdGVGb3JtIH0gZnJvbSBcIi4vdGVtcGxhdGVfZm9ybVwiO1xuXG5pbXBvcnQge1xuICAgIE1hcmtkb3duUmVuZGVyZXIsXG4gICAgTWFya2Rvd25WaWV3LFxufSBmcm9tICdvYnNpZGlhbic7XG5cbmNvbnN0IFRFTVBMQVRFX1BSRUZJWCA9IFwiVDpcIjtcblxuLy8gSW50ZXJmYWNlIGZvciB0aGUgaW5wdXQgaGFuZGxlclxuaW50ZXJmYWNlIElucHV0SGFuZGxlciB7XG4gICAgcmVwbGFjZUN1cnNvclRleHQ6ICh0ZXh0OiBzdHJpbmcpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBTdWdnZXN0aW9uUG9wdXAge1xuICAgIHByaXZhdGUgZWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBpc1Zpc2libGU6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBjdXJyZW50TWF0Y2g6IHN0cmluZyB8IG51bGw7XG4gICAgcHJpdmF0ZSBjdXJyZW50UmVwbGFjZW1lbnRzOiBzdHJpbmdbXSB8IG51bGw7XG4gICAgcHJpdmF0ZSBmYXN0UmVwbGFjZTogYm9vbGVhbjtcbiAgICBwcml2YXRlIHNlbGVjdGVkSW5kZXg6IG51bWJlcjtcbiAgICBwcml2YXRlIGlucHV0SGFuZGxlcjogSW5wdXRIYW5kbGVyIHwgbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoKTtcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jdXJyZW50TWF0Y2ggPSBudWxsO1xuICAgICAgICB0aGlzLmN1cnJlbnRSZXBsYWNlbWVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLmZhc3RSZXBsYWNlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgICAgICB0aGlzLmlucHV0SGFuZGxlciA9IG51bGw7XG4gICAgICAgIHRoaXMudmlldyA9IG51bGw7XG5cbiAgICAgICAgLy8gQmluZCBtZXRob2RzIHRoYXQgYXJlIHVzZWQgYXMgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgdGhpcy5oYW5kbGVEb2N1bWVudENsaWNrID0gdGhpcy5oYW5kbGVEb2N1bWVudENsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlS2V5RG93biA9IHRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpO1xuXG4gICAgICAgIC8vIEFkZCBnbG9iYWwgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVEb2N1bWVudENsaWNrKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVFbGVtZW50KCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgICAgICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcG9wdXAuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgICBwYWRkaW5nOiAycHg7XG4gICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4yKTtcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgei1pbmRleDogMTAwMDA7XG4gICAgICAgIGA7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocG9wdXApO1xuICAgICAgICByZXR1cm4gcG9wdXA7XG4gICAgfVxuXG4gICAgc2hvdyh4OiBudW1iZXIsIHk6IG51bWJlciwgbWF0Y2g6IHN0cmluZywgcmVwbGFjZW1lbnRzOiBzdHJpbmdbXSwgaW5wdXRIYW5kbGVyOiBJbnB1dEhhbmRsZXIsIGZhc3RSZXBsYWNlID0gZmFsc2UsIHZpZXc6IE1hcmtkb3duVmlldyk6IHZvaWQge1xuICAgICAgICB0aGlzLmN1cnJlbnRNYXRjaCA9IG1hdGNoO1xuICAgICAgICB0aGlzLmN1cnJlbnRSZXBsYWNlbWVudHMgPSByZXBsYWNlbWVudHM7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgICAgICB0aGlzLmlucHV0SGFuZGxlciA9IGlucHV0SGFuZGxlcjtcbiAgICAgICAgdGhpcy5mYXN0UmVwbGFjZSA9IGZhc3RSZXBsYWNlICYmIHJlcGxhY2VtZW50cy5sZW5ndGggPT09IDE7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7eCArIDV9cHhgO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuYm90dG9tID0gYCR7d2luZG93LmlubmVySGVpZ2h0IC0geX1weGA7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50b3AgPSAnYXV0byc7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuXG4gICAgICAgIHRoaXMudXBkYXRlQ29udGVudCh2aWV3KTtcbiAgICB9XG5cbiAgICBoaWRlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgdGhpcy5jdXJyZW50TWF0Y2ggPSBudWxsO1xuICAgICAgICB0aGlzLmN1cnJlbnRSZXBsYWNlbWVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLnZpZXcgPSBudWxsO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlQ29udGVudCh2aWV3OiBNYXJrZG93blZpZXcpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRNYXRjaCB8fCAhdGhpcy5jdXJyZW50UmVwbGFjZW1lbnRzKSByZXR1cm47XG4gICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgY29uc3Qgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblxuICAgICAgICAvLyBEZWZpbmUgdGhlIENTUyBydWxlXG4gICAgICAgIGNvbnN0IGNzc1J1bGUgPSBgXG4gICAgICAgICAgcCB7XG4gICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmU7XG4gICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgIH1cbiAgICAgICAgYDtcblxuICAgICAgICAvLyBBZGQgdGhlIENTUyBydWxlIHRvIHRoZSBzdHlsZSBlbGVtZW50XG4gICAgICAgIHN0eWxlRWxlbWVudC50ZXh0Q29udGVudCA9IGNzc1J1bGU7XG5cbiAgICAgICAgLy8gSW5zZXJ0IHRoZSBzdHlsZSBlbGVtZW50IGFzIHRoZSBmaXJzdCBjaGlsZCBvZiB0aGUgZGl2XG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXG4gICAgICAgIHRoaXMuY3VycmVudFJlcGxhY2VtZW50cy5mb3JFYWNoKChvcHRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhcHBsaWVkUmVwbGFjZW1lbnQgPSBvcHRpb24uc3RhcnRzV2l0aChURU1QTEFURV9QUkVGSVgpXG4gICAgICAgICAgICAgICAgPyBvcHRpb24uc2xpY2UoVEVNUExBVEVfUFJFRklYLmxlbmd0aClcbiAgICAgICAgICAgICAgICA6IG9wdGlvbjtcblxuICAgICAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIHNwYW4uaWQgPSBgc3VnZ2VzdGlvbi0ke2luZGV4fWA7XG4gICAgICAgICAgICBzcGFuLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDVweDtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmU7XG4gICAgICAgICAgICBgO1xuXG4gICAgICAgICAgICBzcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IHRoaXMuc2VsZWN0ZWRJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc3Bhbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IHRoaXMuc2VsZWN0ZWRJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RTdWdnZXN0aW9uKGluZGV4KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgaW5kaWNhdG9yIHNwYW5cbiAgICAgICAgICAgIGNvbnN0IGluZGljYXRvclNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5mYXN0UmVwbGFjZSAmJiB0aGlzLmN1cnJlbnRSZXBsYWNlbWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yU3Bhbi5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzIyYzU1ZTtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAycHg7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC42ZW07XG4gICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3JTcGFuLnRleHRDb250ZW50ID0gJ1x1MjZBMSc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGluZGljYXRvclNwYW4uc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjdlbTtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM4ODg7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMnB4O1xuICAgICAgICAgICAgICAgIGA7XG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yU3Bhbi50ZXh0Q29udGVudCA9IGAke2luZGV4ICsgMX0uYDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ3JlYXRlIG1hdGggY29udGVudCBzcGFuXG4gICAgICAgICAgICBjb25zdCBtYXRoU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblxuICAgICAgICAgICAgc3Bhbi5hcHBlbmRDaGlsZChpbmRpY2F0b3JTcGFuKTtcbiAgICAgICAgICAgIHNwYW4uYXBwZW5kQ2hpbGQobWF0aFNwYW4pO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICAgICAgTWFya2Rvd25SZW5kZXJlci5yZW5kZXJNYXJrZG93bihcbiAgICAgICAgICAgICAgICBgJCR7YXBwbGllZFJlcGxhY2VtZW50fSRgLFxuICAgICAgICAgICAgICAgIG1hdGhTcGFuLFxuICAgICAgICAgICAgICAgIHZpZXcuZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgIHZpZXdcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFR5cGVTY3JpcHQgZG9lc24ndCBrbm93IGFib3V0IE1hdGhKYXggYnkgZGVmYXVsdCwgc28gd2UgbmVlZCB0byBkZWNsYXJlIGl0XG4gICAgICAgIC8vKHdpbmRvdyBhcyBhbnkpLk1hdGhKYXgudHlwZXNldFByb21pc2UoW3RoaXMuZWxlbWVudF0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlU2VsZWN0ZWRTdWdnZXN0aW9uKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBzdWdnZXN0aW9ucyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxTcGFuRWxlbWVudD4oJ3NwYW5baWRePVwic3VnZ2VzdGlvbi1cIl0nKTtcbiAgICAgICAgc3VnZ2VzdGlvbnMuZm9yRWFjaChzcGFuID0+IHtcbiAgICAgICAgICAgIHNwYW4uc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZFNwYW4gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MU3BhbkVsZW1lbnQ+KGAjc3VnZ2VzdGlvbi0ke3RoaXMuc2VsZWN0ZWRJbmRleH1gKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZFNwYW4pIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFNwYW4uc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZWxlY3RTdWdnZXN0aW9uKGluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRSZXBsYWNlbWVudHMgfHwgIXRoaXMudmlldykgcmV0dXJuO1xuXG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5jdXJyZW50UmVwbGFjZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSB0aGlzLmN1cnJlbnRSZXBsYWNlbWVudHNbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50LnN0YXJ0c1dpdGgoVEVNUExBVEVfUFJFRklYKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvcm0gPSBuZXcgVGVtcGxhdGVGb3JtKHJlcGxhY2VtZW50LnNsaWNlKFRFTVBMQVRFX1BSRUZJWC5sZW5ndGgpLCB0aGlzLmlucHV0SGFuZGxlcik7XG4gICAgICAgICAgICAgICAgZm9ybS5zaG93KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy52aWV3LmVkaXRvci5vZmZzZXRUb1BvcyhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LmVkaXRvci5wb3NUb09mZnNldCh0aGlzLnZpZXcuZWRpdG9yLmdldEN1cnNvcigpKSAtIHRoaXMuY3VycmVudE1hdGNoLmxlbmd0aFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LmVkaXRvci5yZXBsYWNlUmFuZ2UocmVwbGFjZW1lbnQsIHN0YXJ0LCB0aGlzLnZpZXcuZWRpdG9yLmdldEN1cnNvcigpKTtcbiAgICAgICAgICAgICAgICAvL3RoaXMuaW5wdXRIYW5kbGVyLnJlcGxhY2VDdXJzb3JUZXh0KHJlcGxhY2VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVLZXlEb3duKGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzVmlzaWJsZSB8fCAhdGhpcy5jdXJyZW50UmVwbGFjZW1lbnRzKSByZXR1cm47XG5cbiAgICAgICAgLy8gSGFuZGxlIGZhc3QgcmVwbGFjZSBmb3Igbm9uLWFscGhhbnVtZXJpYyBrZXlzXG4gICAgICAgIGlmICh0aGlzLmZhc3RSZXBsYWNlICYmXG4gICAgICAgICAgICAhL15bYS16QS1aMC05XSQvLnRlc3QoZS5rZXkpICYmXG4gICAgICAgICAgICAhWydFc2NhcGUnLCAnVGFiJywgJ0JhY2tzcGFjZSddLmluY2x1ZGVzKGUua2V5KSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RTdWdnZXN0aW9uKDApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgY2FzZSAnRXNjYXBlJzpcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ1RhYic6XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSW5kZXggPCB0aGlzLmN1cnJlbnRSZXBsYWNlbWVudHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXgrKztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkU3VnZ2VzdGlvbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdFbnRlcic6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RTdWdnZXN0aW9uKHRoaXMuc2VsZWN0ZWRJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChlLmtleSA+PSAnMScgJiYgZS5rZXkgPD0gJzknKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoZS5rZXkpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgdGhpcy5jdXJyZW50UmVwbGFjZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RTdWdnZXN0aW9uKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRG9jdW1lbnRDbGljayhlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSAmJiAhdGhpcy5lbGVtZW50LmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVEb2N1bWVudENsaWNrKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bik7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQgJiYgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQ29uZmlnTWFuYWdlciwgTWF0aENvbmZpZywgUGF0dGVybiB9IGZyb20gXCIuL2NvbmZpZ1wiXG5cbmV4cG9ydCBjbGFzcyBNYXRjaEZvcm0ge1xuICAgIHByaXZhdGUgY29uZmlnTWFuYWdlcjogQ29uZmlnTWFuYWdlcjtcbiAgICBwcml2YXRlIGNvbmZpZzogTWF0aENvbmZpZztcbiAgICBwcml2YXRlIG1hdGNoRGF0YTogUGF0dGVybkNvbmZpZyB8IG51bGw7XG4gICAgcHJpdmF0ZSBlbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ01hbmFnZXI6IENvbmZpZ01hbmFnZXIsIG1hdGNoRGF0YTogUGF0dGVybiB8IG51bGwgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuY29uZmlnTWFuYWdlciA9IGNvbmZpZ01hbmFnZXI7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnTWFuYWdlci5jb25maWc7XG4gICAgICAgIHRoaXMubWF0Y2hEYXRhID0gbWF0Y2hEYXRhO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoKTtcbiAgICAgICAgdGhpcy5hdHRhY2hFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLnBvcHVsYXRlUmVwbGFjZW1lbnRzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVFbGVtZW50KCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBmb3JtLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4yKTtcbiAgICAgICAgICAgIHotaW5kZXg6IDEwMDAzO1xuICAgICAgICAgICAgbWF4LXdpZHRoOiA4MCU7XG4gICAgICAgICAgICBtYXgtaGVpZ2h0OiA4MCU7XG4gICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICBgO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGZhc3QgcmVwbGFjZSB0b2dnbGUgc2VjdGlvblxuICAgICAgICBjb25zdCBmYXN0UmVwbGFjZUh0bWwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmFzdC1yZXBsYWNlLXNlY3Rpb25cIiBzdHlsZT1cIm1hcmdpbi10b3A6IDE1cHg7IG1hcmdpbi1ib3R0b206IDE1cHg7XCI+XG4gICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPVwiZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA4cHg7XCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImZhc3RSZXBsYWNlXCIgJHt0aGlzLm1hdGNoRGF0YT8uZmFzdFJlcGxhY2UgPyAnY2hlY2tlZCcgOiAnJ30+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIEZhc3QgUmVwbGFjZVxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJjb2xvcjogIzIyYzU1ZTsgbWFyZ2luLWxlZnQ6IDRweDtcIj5cdTI2QTE8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJmb250LXNpemU6IDAuOGVtOyBjb2xvcjogIzY2NjsgbWFyZ2luLXRvcDogNHB4O1wiPlxuICAgICAgICAgICAgICAgICAgICBFbmFibGVzIHF1aWNrIHJlcGxhY2VtZW50IHdpdGggYW55IG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVyXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcblxuICAgICAgICBmb3JtLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxoMj4ke3RoaXMubWF0Y2hEYXRhID8gJ0VkaXQgUGF0dGVybicgOiAnQ3JlYXRlIE5ldyBQYXR0ZXJuJ308L2gyPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInBhdHRlcm5cIj5QYXR0ZXJuIChyZWdleCk6PC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwicGF0dGVyblwiIHZhbHVlPVwiJHt0aGlzLm1hdGNoRGF0YSA/IHRoaXMubWF0Y2hEYXRhLnBhdHRlcm4gOiAnJ31cIj48YnI+PGJyPlxuICAgICAgICAgICAgJHtmYXN0UmVwbGFjZUh0bWx9XG4gICAgICAgICAgICA8ZGl2IGlkPVwicmVwbGFjZW1lbnRzXCI+PC9kaXY+XG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwiYWRkUmVwbGFjZW1lbnRcIj5BZGQgUmVwbGFjZW1lbnQ8L2J1dHRvbj48YnI+PGJyPlxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInNhdmVNYXRjaFwiPlNhdmU8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjYW5jZWxNYXRjaFwiPkNhbmNlbDwvYnV0dG9uPlxuICAgICAgICBgO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0pO1xuXG4gICAgICAgIHJldHVybiBmb3JtO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXR0YWNoRXZlbnRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFkZFJlcGxhY2VtZW50QnV0dG9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGRSZXBsYWNlbWVudCcpO1xuICAgICAgICBjb25zdCBzYXZlTWF0Y2hCdXR0b24gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignI3NhdmVNYXRjaCcpO1xuICAgICAgICBjb25zdCBjYW5jZWxNYXRjaEJ1dHRvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjY2FuY2VsTWF0Y2gnKTtcblxuICAgICAgICBpZiAoYWRkUmVwbGFjZW1lbnRCdXR0b24gJiYgc2F2ZU1hdGNoQnV0dG9uICYmIGNhbmNlbE1hdGNoQnV0dG9uKSB7XG4gICAgICAgICAgICBhZGRSZXBsYWNlbWVudEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFJlcGxhY2VtZW50RmllbGQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZhc3RSZXBsYWNlU3RhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2F2ZU1hdGNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zYXZlTWF0Y2goKSk7XG4gICAgICAgICAgICBjYW5jZWxNYXRjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGlkZSgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlRmFzdFJlcGxhY2VTdGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZmFzdFJlcGxhY2VDaGVja2JveCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjZmFzdFJlcGxhY2UnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICBjb25zdCByZXBsYWNlbWVudHMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3JlcGxhY2VtZW50cyBmaWVsZHNldCcpO1xuXG4gICAgICAgIGlmIChmYXN0UmVwbGFjZUNoZWNrYm94KSB7XG4gICAgICAgICAgICAvLyBEaXNhYmxlIGZhc3QgcmVwbGFjZSBpZiB0aGVyZSdzIG1vcmUgdGhhbiBvbmUgcmVwbGFjZW1lbnRcbiAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGZhc3RSZXBsYWNlQ2hlY2tib3guY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZhc3RSZXBsYWNlQ2hlY2tib3guZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZhc3RSZXBsYWNlQ2hlY2tib3gudGl0bGUgPSAnRmFzdCByZXBsYWNlIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBwYXR0ZXJucyB3aXRoIGEgc2luZ2xlIHJlcGxhY2VtZW50JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZmFzdFJlcGxhY2VDaGVja2JveC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZhc3RSZXBsYWNlQ2hlY2tib3gudGl0bGUgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcG9wdWxhdGVSZXBsYWNlbWVudHMoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLm1hdGNoRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5tYXRjaERhdGEucmVwbGFjZW1lbnRzLmZvckVhY2gocmVwbGFjZW1lbnQgPT4ge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSByZXBsYWNlbWVudCBpcyBhIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgY29uc3QgaXNUZW1wbGF0ZSA9IHJlcGxhY2VtZW50LnN0YXJ0c1dpdGgoJ1Q6Jyk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsUmVwbGFjZW1lbnQgPSBpc1RlbXBsYXRlID8gcmVwbGFjZW1lbnQuc2xpY2UoMikgOiByZXBsYWNlbWVudDtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFJlcGxhY2VtZW50RmllbGQoYWN0dWFsUmVwbGFjZW1lbnQsIGlzVGVtcGxhdGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFkZFJlcGxhY2VtZW50RmllbGQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYWRkUmVwbGFjZW1lbnRGaWVsZChyZXBsYWNlbWVudDogc3RyaW5nID0gJycsIGlzVGVtcGxhdGU6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgICAgICBjb25zdCByZXBsYWNlbWVudHNEaXYgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignI3JlcGxhY2VtZW50cycpO1xuICAgICAgICBpZiAoIXJlcGxhY2VtZW50c0RpdikgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGZpZWxkU2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmllbGRzZXQnKTtcbiAgICAgICAgZmllbGRTZXQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgYDtcbiAgICAgICAgXG4gICAgICAgIGZpZWxkU2V0LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDEwcHg7XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZsZXgtZ3JvdzogMTtcIj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInJlcGxhY2VtZW50XCI+UmVwbGFjZW1lbnQ6PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJyZXBsYWNlbWVudFwiIHZhbHVlPVwiJHtyZXBsYWNlbWVudH1cIiBzdHlsZT1cIndpZHRoOiAxMDAlO1wiPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogNHB4O1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwidGVtcGxhdGUtY2hlY2tib3hcIiAke2lzVGVtcGxhdGUgPyAnY2hlY2tlZCcgOiAnJ30+XG4gICAgICAgICAgICAgICAgICAgICAgICBUZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJyZW1vdmVSZXBsYWNlbWVudFwiIHN0eWxlPVwibWFyZ2luLWxlZnQ6IGF1dG87XCI+UmVtb3ZlPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcblxuICAgICAgICBjb25zdCByZW1vdmVCdXR0b24gPSBmaWVsZFNldC5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlUmVwbGFjZW1lbnQnKTtcbiAgICAgICAgaWYgKHJlbW92ZUJ1dHRvbikge1xuICAgICAgICAgICAgcmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGZpZWxkU2V0LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRmFzdFJlcGxhY2VTdGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVwbGFjZW1lbnRzRGl2LmFwcGVuZENoaWxkKGZpZWxkU2V0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNhdmVNYXRjaCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGF0dGVybklucHV0ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwYXR0ZXJuJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgY29uc3QgZmFzdFJlcGxhY2VDaGVja2JveCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjZmFzdFJlcGxhY2UnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICBjb25zdCByZXBsYWNlbWVudEZpZWxkc2V0cyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjcmVwbGFjZW1lbnRzIGZpZWxkc2V0Jyk7XG5cbiAgICAgICAgaWYgKCFwYXR0ZXJuSW5wdXQpIHJldHVybjtcblxuICAgICAgICBjb25zdCBwYXR0ZXJuID0gcGF0dGVybklucHV0LnZhbHVlO1xuICAgICAgICBjb25zdCByZXBsYWNlbWVudHMgPSBBcnJheS5mcm9tKHJlcGxhY2VtZW50RmllbGRzZXRzKS5tYXAoZmllbGRzZXQgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnRJbnB1dCA9IGZpZWxkc2V0LnF1ZXJ5U2VsZWN0b3IoJy5yZXBsYWNlbWVudCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZUNoZWNrYm94ID0gZmllbGRzZXQucXVlcnlTZWxlY3RvcignLnRlbXBsYXRlLWNoZWNrYm94JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50VmFsdWUgPSByZXBsYWNlbWVudElucHV0Py52YWx1ZSB8fCAnJztcbiAgICAgICAgICAgIGNvbnN0IGlzVGVtcGxhdGUgPSB0ZW1wbGF0ZUNoZWNrYm94Py5jaGVja2VkIHx8IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGlzVGVtcGxhdGUgPyBgVDoke3JlcGxhY2VtZW50VmFsdWV9YCA6IHJlcGxhY2VtZW50VmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBmYXN0UmVwbGFjZSA9IGZhc3RSZXBsYWNlQ2hlY2tib3g/LmNoZWNrZWQgfHwgZmFsc2U7XG5cbiAgICAgICAgaWYgKHRoaXMubWF0Y2hEYXRhKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgb2xkIHBhdHRlcm5cbiAgICAgICAgICAgIGNvbnN0IG9sZFBhdHRlcm5JbmRleCA9IHRoaXMuY29uZmlnLnBhdHRlcm5zLmZpbmRJbmRleChwID0+XG4gICAgICAgICAgICAgICAgcC5wYXR0ZXJuID09PSB0aGlzLm1hdGNoRGF0YS5wYXR0ZXJuXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKG9sZFBhdHRlcm5JbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5wYXR0ZXJucy5zcGxpY2Uob2xkUGF0dGVybkluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBuZXcgcGF0dGVyblxuICAgICAgICB0aGlzLmNvbmZpZy5wYXR0ZXJucy5wdXNoKHtcbiAgICAgICAgICAgIHBhdHRlcm4sXG4gICAgICAgICAgICByZXBsYWNlbWVudHMsXG4gICAgICAgICAgICBmYXN0UmVwbGFjZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTYXZlIGNvbmZpZ1xuICAgICAgICB0aGlzLmNvbmZpZ01hbmFnZXIudXBkYXRlQ29uZmlnKHRoaXMuY29uZmlnKTtcblxuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2hvdygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH1cblxuICAgIHB1YmxpYyBoaWRlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpOyAvLyBSZW1vdmUgdGhlIGZvcm0gZnJvbSBET00gd2hlbiBoaWRpbmdcbiAgICB9XG59XG4iLCAiaW1wb3J0IHtDb25maWdNYW5hZ2VyfSBmcm9tIFwiLi9jb25maWdcIlxuaW1wb3J0IHsgTWF0Y2hGb3JtIH0gZnJvbSBcIi4vbWF0Y2hfZm9ybVwiXG5cblxuZXhwb3J0IGNsYXNzIENvbmZpZ0RpYWxvZyB7XG4gICAgcHJpdmF0ZSBlbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIGNvbmZpZ01hbmFnZXI6IENvbmZpZ01hbmFnZXI7XG4gICAgcHJpdmF0ZSBjb25maWc6IGFueTtcbiAgICBwcml2YXRlIGlzVmlzaWJsZTogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ01hbmFnZXI6IENvbmZpZ01hbmFnZXIpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gdGhpcy5jcmVhdGVFbGVtZW50KCk7XG4gICAgICAgIHRoaXMuY29uZmlnTWFuYWdlciA9IGNvbmZpZ01hbmFnZXI7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnTWFuYWdlci5jb25maWc7XG4gICAgICAgIHRoaXMuaGFuZGxlRG9jdW1lbnRDbGljayA9IHRoaXMuaGFuZGxlRG9jdW1lbnRDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlRWxlbWVudCgpOiBIVE1MRGl2RWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaWFsb2cuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggMTBweCByZ2JhKDAsMCwwLDAuMik7XG4gICAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICAgICAgei1pbmRleDogMTAwMDI7XG4gICAgICAgICAgICBtYXgtd2lkdGg6IDgwJTtcbiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDgwJTtcbiAgICAgICAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgYDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaWFsb2cpO1xuICAgICAgICByZXR1cm4gZGlhbG9nO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlRWRpdEJ1dHRvbihjb25mOiBQYXR0ZXJuQ29uZmlnKTogSFRNTEJ1dHRvbkVsZW1lbnQge1xuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9ICdcdTI3MEZcdUZFMEYnOyAvLyBFZGl0IGljb25cbiAgICAgICAgYnV0dG9uLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogOHB4O1xuICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDJweCA2cHg7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICAgICAgICBgO1xuICAgICAgICBidXR0b24udGl0bGUgPSAnRWRpdCBwYXR0ZXJuJztcblxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gUHJldmVudCBkaWFsb2cgZnJvbSBjbG9zaW5nXG4gICAgICAgICAgICBjb25zdCBtYXRjaEZvcm0gPSBuZXcgTWF0Y2hGb3JtKHRoaXMuY29uZmlnTWFuYWdlciwgY29uZik7XG4gICAgICAgICAgICBtYXRjaEZvcm0uc2hvdygpO1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuXG4gICAgcHVibGljIHNob3coc2VsZWN0ZWRUZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICAgIHRpdGxlLmlubmVySFRNTCA9IGBNYXRjaGluZyBQYXR0ZXJucyBmb3IgPGNvZGU+JHtzZWxlY3RlZFRleHR9PC9jb2RlPmA7XG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IHRoaXMuY29uZmlnTWFuYWdlci5tYXRjaGVyLmdldE1hdGNoaW5nUGF0dGVybnMoc2VsZWN0ZWRUZXh0KTtcbiAgICAgICAgZm9yIChjb25zdCB7IHZhbHVlLCB3aWxkY2FyZE1hdGNoZXMgfSBvZiBtYXRjaGVzKSB7XG4gICAgICAgICAgICBjb25zdCB7IHBhdHRlcm4sIHJlcGxhY2VtZW50cywgZmFzdFJlcGxhY2UgfSA9IHZhbHVlO1xuICAgICAgICAgICAgY29uc3QgcGF0dGVybkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgcGF0dGVybiBoZWFkZXIgd2l0aCBlZGl0IGJ1dHRvblxuICAgICAgICAgICAgY29uc3QgcGF0dGVybkhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gICAgICAgICAgICBwYXR0ZXJuSGVhZGVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgICAgICBwYXR0ZXJuSGVhZGVyLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWRkIGZhc3QgcmVwbGFjZSBpbmRpY2F0b3IgaWYgZW5hYmxlZFxuICAgICAgICAgICAgaWYgKGZhc3RSZXBsYWNlICYmIHJlcGxhY2VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmYXN0UmVwbGFjZUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICAgICAgZmFzdFJlcGxhY2VJY29uLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMjJjNTVlO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgICAgIGZhc3RSZXBsYWNlSWNvbi50aXRsZSA9ICdGYXN0IFJlcGxhY2UgRW5hYmxlZCc7XG4gICAgICAgICAgICAgICAgZmFzdFJlcGxhY2VJY29uLnRleHRDb250ZW50ID0gJ1x1MjZBMSc7XG4gICAgICAgICAgICAgICAgcGF0dGVybkhlYWRlci5hcHBlbmRDaGlsZChmYXN0UmVwbGFjZUljb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwYXR0ZXJuVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIHBhdHRlcm5UZXh0LmlubmVySFRNTCA9IGBQYXR0ZXJuOiA8Y29kZT4ke3BhdHRlcm59PC9jb2RlPmA7XG4gICAgICAgICAgICBwYXR0ZXJuSGVhZGVyLmFwcGVuZENoaWxkKHBhdHRlcm5UZXh0KTtcbiAgICAgICAgICAgIHBhdHRlcm5IZWFkZXIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFZGl0QnV0dG9uKHZhbHVlKSk7XG5cbiAgICAgICAgICAgIHBhdHRlcm5EaXYuYXBwZW5kQ2hpbGQocGF0dGVybkhlYWRlcik7XG5cbiAgICAgICAgICAgIC8vIEFkZCByZXBsYWNlbWVudHMgbGlzdFxuICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnRzTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgICAgICByZXBsYWNlbWVudHNMaXN0LmlubmVySFRNTCA9IHJlcGxhY2VtZW50c1xuICAgICAgICAgICAgICAgIC5tYXAociA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbmRlcmVkID0gKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLnN0YXJ0c1dpdGgoXCJUOlwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLnNsaWNlKDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25maWdNYW5hZ2VyLm1hdGNoZXIucmVwbGFjZVBsYWNlaG9sZGVycyhyLCB3aWxkY2FyZE1hdGNoZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDxsaT4kJHtyZW5kZXJlZH0kIDxjb2RlPlske3J9XTwvY29kZT48L2xpPmA7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuam9pbignJyk7XG4gICAgICAgICAgICBwYXR0ZXJuRGl2LmFwcGVuZENoaWxkKHJlcGxhY2VtZW50c0xpc3QpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHBhdHRlcm5EaXYpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBc3N1bWluZyBNYXRoSmF4IGlzIGdsb2JhbGx5IGF2YWlsYWJsZVxuICAgICAgICAgICAgKHdpbmRvdyBhcyBhbnkpLk1hdGhKYXgudHlwZXNldFByb21pc2UoW3BhdHRlcm5EaXZdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc3Qgbm9NYXRjaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgIG5vTWF0Y2gudGV4dENvbnRlbnQgPSAnTm8gbWF0Y2hpbmcgcGF0dGVybnMgZm91bmQuJztcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChub01hdGNoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGNsb3NlQnV0dG9uLnRleHRDb250ZW50ID0gJ0Nsb3NlJztcbiAgICAgICAgY2xvc2VCdXR0b24ub25jbGljayA9ICgpID0+IHsgdGhpcy5oaWRlKCk7IH07XG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbik7XG5cbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IHRydWU7XG4gICAgfVxuXG4gICAgcHVibGljIGhpZGUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBoYW5kbGVEb2N1bWVudENsaWNrKGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlICYmICF0aGlzLmVsZW1lbnQuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJ1xuXG5leHBvcnQgY2xhc3MgU2VsZWN0aW9uQnV0dG9uIGV4dGVuZHMgQ29tcG9uZW50e1xuICAgIHByaXZhdGUgY29uZmlnTWFuYWdlcjogQ29uZmlnTWFuYWdlcjtcbiAgICBwcml2YXRlIGVsZW1lbnQ6IEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHByaXZhdGUgc2VsZWN0aW9uVGltZW91dDogbnVtYmVyIHwgbnVsbDtcbiAgICBwcml2YXRlIGNvbmZpZ0RpYWxvZzogQ29uZmlnRGlhbG9nO1xuICAgIHByaXZhdGUgaGFzTWF0Y2g6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWdNYW5hZ2VyOiBDb25maWdNYW5hZ2VyLCBjb25maWdEaWFsb2c6IENvbmZpZ0RpYWxvZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbmZpZ01hbmFnZXIgPSBjb25maWdNYW5hZ2VyO1xuICAgICAgICB0aGlzLnNlbGVjdGlvblRpbWVvdXQgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbmZpZ0RpYWxvZyA9IGNvbmZpZ0RpYWxvZztcbiAgICAgICAgdGhpcy5oYXNNYXRjaCA9IGZhbHNlO1xuICAgIH1cblxuICAgIG9ubG9hZCgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gdGhpcy5jcmVhdGVFbGVtZW50KCk7XG4gICAgICAgIHRoaXMuYXR0YWNoRXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlRWxlbWVudCgpOiBIVE1MQnV0dG9uRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24uc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgICAgd2lkdGg6IDI0cHg7XG4gICAgICAgICAgICBoZWlnaHQ6IDI0cHg7XG4gICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICB6LWluZGV4OiAxMDAwMTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4O1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgYDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXR0YWNoRXZlbnRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudCh0aGlzLmVsZW1lbnQsICdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVGV4dCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKT8udG9TdHJpbmcoKS50cmltKCkgPz8gJyc7XG4gICAgICAgICAgICBpZiAodGhpcy5oYXNNYXRjaCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnRGlhbG9nLnNob3coc2VsZWN0ZWRUZXh0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hGb3JtID0gbmV3IE1hdGNoRm9ybSh0aGlzLmNvbmZpZ01hbmFnZXIsIHtwYXR0ZXJuOiBzZWxlY3RlZFRleHQsIHJlcGxhY2VtZW50czogW119KTtcbiAgICAgICAgICAgICAgICBtYXRjaEZvcm0uc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2luZG93LmdldFNlbGVjdGlvbigpPy5lbXB0eSgpO1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2tleXVwJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ21vdXNldXAnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNlbGVjdGlvbigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2hvdyh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUubGVmdCA9IGAke3h9cHhgO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0gYCR7eX1weGA7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9XG5cbiAgICBwdWJsaWMgaGlkZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuXG4gICAgcHVibGljIGhhbmRsZVNlbGVjdGlvbigpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uVGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2VsZWN0aW9uVGltZW91dCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNlbGVjdGlvblRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZFRleHQgPSBzZWxlY3Rpb24/LnRvU3RyaW5nKCkudHJpbSgpID8/ICcnO1xuXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRUZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhc01hdGNoID0gdGhpcy5jb25maWdNYW5hZ2VyLm1hdGNoZXIuZ2V0TWF0Y2hpbmdQYXR0ZXJucyhzZWxlY3RlZFRleHQpLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25BcHBlYXJhbmNlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSBzZWxlY3Rpb24/LmdldFJhbmdlQXQoMCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHJhbmdlPy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBpZiAocmVjdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3cocmVjdC5yaWdodCArIHdpbmRvdy5wYWdlWE9mZnNldCwgcmVjdC50b3AgKyB3aW5kb3cucGFnZVlPZmZzZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDcwKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUJ1dHRvbkFwcGVhcmFuY2UoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmhhc01hdGNoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQudGV4dENvbnRlbnQgPSAnXHUyNjk5XHVGRTBGJztcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC50aXRsZSA9ICdWaWV3IG1hdGNoaW5nIHBhdHRlcm5zJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC50ZXh0Q29udGVudCA9ICcrJztcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC50aXRsZSA9ICdBZGQgbmV3IHBhdHRlcm4nO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQSx1QkFRTzs7O0FDWVAscUJBQWU7QUFBQSxFQUlYLGNBQWM7QUFDVixTQUFLLFdBQVc7QUFDaEIsU0FBSyxRQUFRO0FBQUE7QUFBQTtBQUlyQixpQkFBVztBQUFBLEVBT1AsWUFBWSxPQUFtQjtBQUMzQixTQUFLLE9BQU8sSUFBSTtBQUNoQixlQUFXLEVBQUUsTUFBTSxXQUFXLE9BQU87QUFDakMsV0FBSyxPQUFPLE1BQU07QUFBQTtBQUFBO0FBQUEsRUFTbEIsT0FBTyxNQUFjLE9BQXNCO0FBQy9DLFFBQUksT0FBTyxLQUFLO0FBQ2hCLGVBQVcsUUFBUSxNQUFNO0FBQ3JCLFVBQUksQ0FBQyxLQUFLLFNBQVMsT0FBTztBQUN0QixhQUFLLFNBQVMsUUFBUSxJQUFJO0FBQUE7QUFFOUIsYUFBTyxLQUFLLFNBQVM7QUFBQTtBQUV6QixTQUFLLFFBQVE7QUFBQTtBQUFBLEVBU2pCLE9BQU8sT0FBK0I7QUFDbEMsVUFBTSxVQUEwQjtBQUNoQyxVQUFNLFVBQVUsSUFBSTtBQUVwQixTQUFLLGNBQWMsS0FBSyxNQUFNLE9BQU8sR0FBRyxTQUFTLElBQUk7QUFFckQsV0FBTztBQUFBO0FBQUEsRUFHSCxjQUNKLE1BQ0EsT0FDQSxPQUNBLFNBQ0EsaUJBQ0EsU0FDSTtBQUNKLFFBQUksVUFBVSxNQUFNLFFBQVE7QUFDeEIsVUFBSSxLQUFLLFVBQVUsUUFBUSxDQUFDLFFBQVEsSUFBSSxPQUFPO0FBQzNDLGdCQUFRLEtBQUs7QUFBQSxVQUNULE9BQU8sS0FBSztBQUFBLFVBQ1osT0FBTyxnQkFBZ0I7QUFBQTtBQUUzQixnQkFBUSxJQUFJO0FBQUE7QUFFaEI7QUFBQTtBQUdKLFVBQU0sT0FBTyxNQUFNO0FBR25CLFFBQUksS0FBSyxTQUFTLE9BQU87QUFDckIsV0FBSyxjQUNELEtB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QUFTLE9BQU8sY0FBYyxDQUFDO0FBQUEsSUFDakMsRUFBRSxTQUFTLE1BQU0sY0FBYyxDQUFDO0FBQUEsSUFDaEMsRUFBRSxTQUFTLE1BQU0sY0FBYyxDQUFDO0FBQUEsSUFDaEMsRUFBRSxTQUFTLE1BQU0sY0FBYyxDQUFDO0FBQUEsSUFHaEMsRUFBRSxTQUFTLEtBQUssY0FBYyxDQUFDO0FBQUEsSUFDL0IsRUFBRSxTQUFTLEtBQUssY0FBYyxDQUFDO0FBQUEsSUFFL0IsRUFBRSxTQUFTLEtBQUssY0FBYyxDQUFDO0FBQUEsSUFDL0IsRUFBRSxTQUFTLE9BQU8sY0FBYyxDQUFDO0FBQUEsSUFDakMsRUFBRSxTQUFTLE9BQU8sY0FBYyxDQUFDO0FBQUEsSUFDakMsRUFBRSxTQUFTLE9BQU8sY0FBYyxDQUFDO0FBQUEsSUFDakMsRUFBRSxTQUFTLE9BQU8sY0FBYyxDQUFDO0FBQUEsSUFDakMsRUFBRSxTQUFTLFFBQVEsY0FBYyxDQUFDO0FBQUEsSUFDbEMsRUFBRSxTQUFTLFFBQVEsY0FBYyxDQUFDO0FBQUEsSUFHbEMsRUFBRSxTQUFTLEtBQUssY0FBYyxDQUFDO0FBQUEsSUFDL0IsRUFBRSxTQUFTLE1BQU0sY0FBYyxDQUFDO0FBQUEsSUFDaEMsRUFBRSxTQUFTLE1BQU0sY0FBYyxDQUFDO0FBQUEsSUFDaEMsRUFBRSxTQUFTLE1BQU0sY0FBYyxDQUFDO0FBQUEsSUFDaEMsRUFBRSxTQUFTLE1BQU0sY0FBYyxDQUFDO0FBQUEsSUFDaEMsRUFBRSxTQUFTLE1BQU0sY0FBYyxDQUFDO0FBQUEsSUFHaEMsRUFBRSxTQUFTLE1BQU0sY0FBYyxDQUFDLFNBQVMsYUFBYTtBQUFBLElBQ3RELEVBQUUsU0FBUyxNQUFNLGNBQWMsQ0FBQyxTQUFTLGFBQWE7QUFBQSxJQUN0RCxFQUFFLFNBQVMsVUFBVSxjQUFjLENBQUMsWUFBWTtBQUFBLElBQ2hELEVBQUUsU0FBUyxVQUFVLGNBQWMsQ0FBQyxZQUFZO0FBQUEsSUFDaEQsRUFBRSxTQUFTLFNBQVMsY0FBYyxDQUFDLGVBQWUsYUFBYTtBQUFBLElBRy9ELEVBQUUsU0FBUyxPQUFPLGNBQWMsQ0FBQztBQUFBLElBQ2pDLEVBQUUsU0FBUyxRQUFLLGNBQWMsQ0FBQztBQUFBLElBQy9CLEVBQUUsU0FBUyxRQUFLLGNBQWMsQ0FBQztBQUFBLElBQy9CLEVBQUUsU0FBUyxLQUFLLGNBQWMsQ0FBQztBQUFBLElBQy9CLEVBQUUsU0FBUyxLQUFLLGNBQWMsQ0FBQztBQUFBLElBQy9CLEVBQUUsU0FBUyxLQUFLLGNBQWMsQ0FBQztBQUFBLElBRy9CLEVBQUUsU0FBUyxPQUFPLGNBQWMsQ0FBQztBQUFBLElBQ2pDLEVBQUUsU0FBUyxPQUFPLGNBQWMsQ0FBQztBQUFBLElBQ2pDLEVBQUUsU0FBUyxTQUFTLGNBQWMsQ0FBQztBQUFBLElBQ25DLEVBQUUsU0FBUyxPQUFPLGNBQWMsQ0FBQztBQUFBLElBR2pDLEVBQUUsU0FBUyxPQUFPLGNBQWMsQ0FBQyxVQUFVLGFBQWE7QUFBQSxJQUN4RCxFQUFFLFNBQVMsT0FBTyxjQUFjLENBQUMsVUFBVSxhQUFhO0FBQUEsSUFDeEQsRUFBRSxTQUFTLE9BQU8sY0FBYyxDQUFDLFVBQVUsYUFBYTtBQUFBLElBQ3hELEVBQUUsU0FBUyxPQUFPLGNBQWMsQ0FBQyxVQUFVLGFBQWE7QUFBQSxJQUN4RCxFQUFFLFNBQVMsTUFBTSxjQUFjLENBQUMsU0FBUyxhQUFhO0FBQUEsSUFDdEQsRUFBRSxTQUFTLE9BQU8sY0FBYyxDQUFDLFVBQVUsYUFBYTtBQUFBLElBR3hELEVBQUUsU0FBUyxRQUFRLGNBQWMsQ0FBQztBQUFBLElBQ2xDLEVBQUUsU0FBUyxTQUFTLGNBQWMsQ0FBQztBQUFBLElBR25DLEVBQUUsTUFBTSxTQUFTLFNBQVMsY0FBYyxjQUFjLENBQUM7QUFBQSxJQUN2RCxFQUFFLFNBQVMsYUFBYSxjQUFjLENBQUM7QUFBQSxJQUN2QyxFQUFFLFNBQVMsV0FBVyxjQUFjLENBQUM7QUFBQSxJQUNyQyxFQUFFLFNBQVMsWUFBWSxjQUFjLENBQUM7QUFBQSxJQUd0QyxFQUFFLFNBQVMsVUFBVSxjQUFjLENBQUMsYUFBYSxhQUFhO0FBQUEs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
